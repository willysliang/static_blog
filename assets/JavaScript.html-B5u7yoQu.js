import{_ as n,o as s,c as a,b as t}from"./app-Bvx-HY_0.js";const e="/static_blog/assets/image-20230220184442313-D1Xujw4O.png",p="/static_blog/assets/image-20211017214635189-BuMzYJ3F.png",l="/static_blog/assets/image-20230221095738520-CRNkdplO.png",o="/static_blog/assets/2019-01-14-006-CjRmD_d5.png",c="/static_blog/assets/2019-01-14-007-DdSen9Y4.gif",i="/static_blog/assets/2019-01-14-008-D3i5KBpS.gif",u="/static_blog/assets/image-20210914235451051-B7f9BX6Q.png",r="/static_blog/assets/image-20210914235521432-Cj_43Nba.png",d="/static_blog/assets/image-20230329111340256-C-Ywd6Vj.png",k="/static_blog/assets/image-20230329112327704-mV8he5_y.png",v="/static_blog/assets/image-20230329112729627-BSAkLFmV.png",m="/static_blog/assets/image-20230329112749177-NJxmEQu0.png",b="/static_blog/assets/image-20230329113352649-CA1LHFjo.png",g="/static_blog/assets/image-20230329113418206-CaSsaIjN.png",h="/static_blog/assets/20190128102028682-C9n08bjM.gif",f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAX0AAAD/CAYAAAAddgY2AAAPRElEQVR4nO3dbXKjuBoGUNvpWUjvf1Gzktj3x5T6ErUkxLeEzqmamrYxHybJg3gR4vn5fD4PAIbwunoDADiP0AcYiNAHGIjQBxiI0AcYyK/Um79//z57O1jo33//vXoTuvJ8Ph86qkEm9B8PodKyuxyUU0H8fD4fj8cj+b7Qhu2UdwAGkm3pt2DaugstwKk9W353b0mG7zfdj7lWdmp6PH/u51KaJzVfalqYp/TzKK03NX3p/HBXTYd+LA6Uqbk/8un8uc8efWC5Whyk8eu5ksrc6yXz1AR77feI3yuVjWq3G+6qq9AvWfIHm/rsCH/0W7/fmvnXrnPLQQHIazL0c62ymtb8mnXk3hstcNbs3z1/JrEjg//I7YaWNRn6udP0Unln7Tqmy5sLlzu3POdKIjm97o9etxu2ajL0H49lob7ks/GFxbnllGre/G3vA2Pp51WrZv47H9BhqtnQD2rKO0svNi79/F2UyldrwjU1z9JrK6XeRGvXm1pu6fXS7YaeNRn6065+qT/mUi+NpeuZ/j+s467mvltpem7a0nlKB+DaeebWu3Y9MIImb86q+YPco0Ueug7G/3aRD7irJkO/pNSjY8kNPc/n889/udel+Vty5wuuwL66Cv3p3aCpm7PW9NXPtfbXlBSucOdrEMD+ugr93MW6UvCFz5UOEqmLeq226qcEPrBUkxdyg7nukqVWeW45S5fdqlIZiuO0/nsBc5oO/djRLdueWs6GKTifAyx30FV5Z85of5S9lKGAdtwq9Eck+IElmi7vlJ6iFMQXY2vuvKy5GSu37hb1sI1AG5oM/VLgrhmffc2wC/HBRLACd9BU6NcE7NnhK/yBO2km9FvvibLXeD8AV2om9Ke19hZDteVtA6jVTOg/Hm2WUlraFoCtmgr9YG34rx2fPUXYA3fUZOgHa8Za3/LaU7KAu3NzFsBAhD7AQIQ+wECyNf3fv3+fuR0AnOD5GeiKpRur2MLvD3egvAMwEKEPMBChDzAQoQ8wEKEPMBChDzAQoQ8wEKEPMBChDzAQoQ8wEKEPMBChDzAQoQ8wEKEPMBChDzAQoQ8wEKEPMBChDzAQoQ8wEKEPMBChDzAQoQ8wEKEPMBChDzAQoQ8wEKEPMJBfV28AcIzX6/X4fD67LOv9fj+ez+cuy+JaQh9u6v1+77Kc10tB4E78NAEGIvQBBiL0AQYi9AEGIvQBBiL0AQYi9AEGIvQBBiL0AQYi9AEGYhgGdnX38Vnu8P2MozM2oc/u9hrki/0ZRwe/ASs9n88/raUrWk1z65xOX/JZ5tlf9ExLf4Xn8/mjNbulZRsvK542tWQ9Wtt5NaEd9l/us6n37XN6IPQblToYlA4Q1Nt68PRzoGdCf6G4pPP5fH6EQPj3dPr088H0M9Np8fLieXLbE09fcgZBWWp/bTkLgysJ/YVKoRzE00shvqXVWLue0jzhPfLWnHE5G6BVQv8AZ/2xC5XllhzgpmdjNcvZ6zoPHEnonyAOD4FwndKZUap1vvTz0DqhfxJh0bfc9RfojX76DcqVFY6ovavn1/l8Pn9Cfvpv+4/eaOmfoNTTI1f6SQX/Hi3L1PpGDK4lF+Pj/ZN6rXstvRD6K5TqvrVdLWuml+abW09pm+ZeL9FjuC3d5ly33NKyetsnjEN5h016O1MoBX74LqWWfOl+C+iBlj6bbb3f4Exrzrq2nslBS4YLfa2y49i30L7hQl+r7Bjx8BMtueIspJczH8ajps9mAg76IfTZROBDX4Yr77CvFgM/HuE0fn9u2h7Ta7YHriD0uY1SuJbGzam5uao0fW7k0ri7p/DnSkKf7tWEaQtBK/xpgdCna3tdUzjzOcJzd/PCkYQ+XUs9pWztcnL2fvCMlj5XEvp074iyydYnmpXeF/ZcSehzG2vDf25E07mbzuZGLhX2tEToczs1o4guHWl06XSPTqRVbs4CGIjQBxiI0AcYiJo+u2txpE3gP0KfXZ110XKEG5ter9fj+/vbQZRdKe9Ag8JB7fV63f7gxrmEPjRm+kCa9/v9+Pr6EvzsRuhDQ1JlK8HPntT0oSG5YH+/3z9e15R93u+36wH8RUsfOvR+v3+UgD6fz5//wnsCnxShDzejHESJ0AcYiNAHGIgLudCx9/udvKirpk+O0IfOxT17oER5B2AgWvrQsVJ/fSUeUoQ+dCxV2jFQGyXKO3Az+ulTIvQBBqK8AzekRw85Qh86p58+SyjvQMfCRdt48DU1fXKEPsBAhD7AQIQ+wEBcyOVScxcb1aXLwoBr39/fj8fjvxp/eN+FXFKEPpeLg336nNjUM2P5KXTP1E2TGso7NCf0RAH2J/ThZl6vlzMkspR34AamN2ip51Mi9LlUrpQTAkxrtSyEvaCnltDncoJ9vXDxVkufWkIfbmDac0frnxKhz+VyweQMYB1dNykR+lxKLxM4ly6b0LHQPTP1XziYlp6je7ajt2XN8lPz7L2d8fJql3/E/tLSh47VlHJ6Kvec/XzfNes7+2H0YWiNvdYj9LlU6LLZSkuUcYTwnobqNExz79c+jD7Vuo/nSS0/tveBRHmHS4Vf5lR5gjqpEk8rB9Hc3cHTbY7LUPG0+PulPrNk3VPhoTPT+0WmD6apGRIkd7YQL3vu9Vm09LlUK+HUq1zgnF0mSW1Xrtvo6/X6q0X9/f39Y8TQVIDGn8+9ns4zty2p7V7Ssq7dz/HZQa7klru+EM+75ecq9IHd1ATs2fcPLAn/MG2Pg2btRdh4e0rbl6rvLyX0OV08dHKOs4C+XH12MWca/vHzB1KfnX4ufDb1O5m70Bq35nN1/7MJfU43/cMR7PcRgrLVu4FT25a7cJtSewG3dUIfOjYN2vj9K4JoTR39aGu35aqurke3/oU+p6v9w3MWUKfFfvhrwz8+iG35bi0deFJyB+ujCX1OJ8zHUdNrZe4zS17n/p1zRU09KJWLvr6+/pSNpiWkXS4wb9lo4Hq5oRgcXOeV+sqH/ZrrErv3Pp4G+vv9fnx9ff05U0n9e63nZ6DfDH8IbSo9RKU0z91/ljWtujMuJPZ4sZI85R0ulQvvEUIdrqC8AzRprxEml45wuXZEzD22bW9fX19/XTvQ0oeOlYYuONuSO1DjuvRRPWyO2jdLwro0hMQe65jeRRw+//39nb1ILfS5lFE2t0mNFBlc0VVxbp2pkSWP6kET93rJjXi5Zqyd+O7e2vmXHqSX7M/H47+w/+effx6Px/9b+V9fXz8+I/Q5XeqX+OpWaq9a7KOfa6HObWtusLE1B69U4KfG1ZmGZjzswt6m3y9e71T8fdfsz9DlM17219eX0Od8WvX3tvZAVDNWzdJlTfu916yzpDSiaW7Z8UBqc8vLnbHVCt8ztPin84YDmtCHjqWGGb76LtTalunRN0aVSjrh37n9NJ0eXuc+mxs+ei9LWvrT8k54/Xq9fhz09N7hdNM/kNRNRR6iss704R9bb+DZanrTU+4hIeEzNaWM6fSaa0CpVnQI59R657YtF+xrz0SmZyC1F2vn9mctLX1OZ5RNclJDGq9dTg/27n0Vl7FSZS2hD+zuqNJNCMmt9gra2nr+1nXXfudceefx+H9vHqHPZeLT9OkfgTOAOi2OYV/byi4FZmmeLWG9tWUdj4+T+0zN/NNtmtvmPbiQy6VSgV96TV7NyJUtWtNPf+v3So1imfvcHutLrfvKA7Mum8Ap4gu0pSGQ9x6aIPS8mQZ9fIYULqimeumkHlRTc8F5On/pIBM/P2DN3brhgPLr168/+zMc3OL9a5RNLrG1pT/Cz7K2ZZjrtvl47HNXbgstVPajyyZ0LBX4odtmC103aY/yDpeI+xqr58M5hD6XyQW7wIfjKO9wqVydWP0YjqGlDx2Le5asHbudcQh96FyuL3kPffU5n9DnEvGgazF1fTiG0OcSIdT11NmmdJNQ6qEhIPS5lMDfpqaEo8zDlN47XCo1dr7x9OE4WvpcKi7zKPcsUztOTSsjcHI9oU8TBP56qQdpq+GTo7xDE6YtfbaZjhoJMS19LhVCPgTUNPiFFuxP6HOpVLALeziO0IeOpR7wEd5XKiNF6HO5eIhlF3SX0Q+fJVzI5VIh4Kch74IuHEdLHzqmnz5LCX3omNIOSynvAAxES59LxfV7ffSXMcomSwl9Lifg1zPKJksp7wAMREufy+XKDs4A5tWUd2BK6HMpN2JtkyrdqOFTorwDN2OUTUqEPsBAhD6XMuQCnEtNn0uFwE8Fv/LEvNyFXBdxyRH6XEqwb6MPPksp7wAMREsfOuchKiyhpQ8dCkEf+uSHZxKE/3TZJEfoAwxE6AMMROhDx9x9y1Iu5NKN3Dg9I47f836/f1zAfb2036gj9OlGuHt3GvAjBn6gjz5raB7QlemwDSMHPqwl9OlOCHqBD8sp77C7s24KGuHmo6Nq9W7eGpfQ5xBa4e1y0XdsfvoLXd06mlv/dPqSz7KMfUevtPQvUroIGQfKklazFnadmtAO+zL3WcNB0yOh35jUwUAvlf1tPZD6mdArob/RXKs8NT314JBUH/TcMlPzTt+vPYOgXmrfbTkjg6sI/Y1KrfJSiG9pKa65QSl3BkGdNWdfzgZokdDvkCDZZsnBrvQM37mavp8TLRL6G5UCJA4MIdCG0llSqnW+9PPQMqG/QU3JREDcR+5aDPREP/2G5EoJR9Te1fOXC0+liv9tX9ITLf0NSvXex6Pc6s+VflLL3KM1mVrf6GE1d+YVX5SPp80ty5kdLRL6C5XqvXOfrZ2+dJm5i4dz27pXIPUYbku3Oe5xVdtLC1qjvMNmvZ01lAI/fJdSS7507wW0TkufXWy99+BMa87A5rpi9vC94fEYMPS1yI5l/0Lbhgp9rbFjhZa+4Id2qemzix5KO7q+gtBnBz0EPvAfoc9mAh/6MVRNn7GE0ktpqIwlw2ikpsfTcsNu5LYFzib0uZ1SwM4F89Khsmtr+sKfVgh9bqMmUI8M2+m9CnN36Qp/riL0uYXeLibPDeEARxH63ML0/oAeQrSnbeVehD63cXbpJPfkrJrnFAt7riL0uZ1S+C8Z7npu+pK7j4U9rRD63NaaoaSXDsZWG+LCnla4OQt25MIsrRP6sCOBT+uUdziEgcigTUKf3WntQruUdwAGIvQBBiL0AQYi9AEGIvQBBiL0AQYi9AEGIvQBBiL0AQbijly4sdfr5Q5pfnh+/EYADEN5B2AgQh9gIEIfYCBCH2AgQh9gIP8DZnbsAtVMgJgAAAAASUVORK5CYII=",y="/static_blog/assets/image-20230330174649406-BADm0V1E.png",w="/static_blog/assets/image-20200920125228504-Btvj2ANd.png",q="/static_blog/assets/image-20200920125235120-DqzbMaXC.png",x="/static_blog/assets/image-20210916173138280-CvBzx59J.png",j="/static_blog/assets/image-20210916201824135-DzYncrFG.png",S="/static_blog/assets/js_line-CbLXSaog.png",M="data:image/webp;base64,UklGRpYJAABXRUJQVlA4WAoAAAAQAAAAlwEAgAAAQUxQSK4EAAABoPP//9rG+f1lDHNiCBiDDppZxnAsxYxhKnM7ervx1m7XZ6Iyt9naMQ/hxoz/guGkk/z6Fx0Rjty2kSS5l5lTKa469RPgH5oMk5WppEb7RiMcZGAqodEY/FRAiMBUQqPd40eNcJCBqWRGYzAW9CwRgalkRrvHWNCzRAamUhitcRVhzxIZmEphtMZVhD1LhGAqgdEANjiOwxzHnQoGIZhKYDRoCAYhQwCmEhmt6z9d/+n6zz8IcM84wfOc60ymD2KY7Umddz6tC56H+kswNTRfBpoc8lG9I8QAf1nS9Z+u/3T9p6sJw5L3AvF7d+zev9FI3WsYxO/doXtn8NMmpOoF32gk491pe7/Hj5omROzFvy/JeHfW3hmMWxQqYi/+fUnGu7P2fo9xq0JF7MW/L8l4d9LeGYxbFipiL/59Sca7k/Z+j3HrQkXsxb8vyXh3zt43OI7DHMedNiFiL/59Sca7s/aOoWXE68W/L+l4d6TeH7/huFP+fRG514MBALr+8z9PIAQAFABQqA2oFaidTBsTjkZNIUwQbtxcFaIAev9ELvsThQIQRTWcF1D/aYbUADJVo6uaAkB/ioAacTT//SQ2rzEVoKFocMS96VnsRxRacitlFGg3zDGfLzENGFaKQ0AB0ENoPNJ4RdcCFMDiIlAB86f0ctjl93uCekAkicqLIwUXKHz5WPi1W9YCALMnZoDeUCV3kGXPq6PY4fLdzAEslfL+3ZvaoqxXrT5kk4cKc+TCBM785xE6U9o7KrA7M4CIESSj57HPlnNNHt+G9y7Lr7j7bUb/Tcjaowq8enaWYxMHO/hkv7hzy/QYrq82U69XY1s0e/TGK7uXa73O87J3//IH2pPJ20YONg0qknyYN6M4uqq8mWPfyp1dlOlDvbt49tZ5MaYeuSix9B6b0OHM1dXhdiVBsbX8YeV1Cxryl995fz8YVYbS4cjNG7+chI4G9kuWhAqAINnw1XCq6twJp169vn791TOTUm70XgfnFmYOL0rpfLXgncA7h29cFFYHY+eZ6Hn8rjAD5lD6/TSAvfDunnyn9n02lBoKV89HAJEk9p1DnI6lbMeBs4Pbu9O7OADoanMActvtdSp5XT4ew6X960t21zJYOzekKqZEvy22fLUfZ+QDycu9EVv+M9qbZRYDVTtZsnCmwYGb+JZxMz2XKrGZXat2yn7p0k6BrsQcxY6KES0+ZDJVL42A2dVGzkpzvTFXkk1DhJE78muaWPVbOlyxp2yDxQVA5AhSlFdxZN1tg+l9/Siz7Qo70sXczVWetYQi27vVwuVRCKdOTy8LuTE7nd2271yn1UNBuS+vgq0JbXrnoPjar8Xly1rhiM3sD5Ek0FfC4cVBQGCdArV5rh8sm2ubW2tbtp7w0ozWvhnSYJ/dHXS6HCrHli44AJ4tAJD7VAgAlidMTtePd8jqd7jdTt8iIGIEEMix261FCKDpXwujF/CWNSq1MGyyJNXvDAgwtNnnVh/ZmhbACCEKoSYpQO20EcVFWrgSJdCw3y/RW6AHyXn9leYZ95zjGQl4YfF7C+b1pP6ieajzzae8vR74e33SUsLQjIGWfu5F4C2WfFSXar75uB0AVlA4IMIEAAAwKACdASqYAYEAPpFInkylpKKiIVqosLASCWdu/HyZUcARQB+AA2Gfgt5BRAugL9H9gH1/9DO2A7wD2jvVT/wPUA/bvrAP4B6gH7Vemh+gHwW/uT+0/wAfsB//84A6z/7h4E+L/1fGDJD8NO8GWVcX/mXawegH05/yWu3+Aeo9/Uf+d6Y/zB6D/m39d/gF/VH/o9gD0Nv1mC5jfGqpQHqJlNVSgPUTKaqlAeomU1VKA9RMpqqUB6iZTVUoD1EymqpQHqJlNVSgPUTKaqlAeomU1VKA9RHJKYazpt835jVYMIjklMNaacdBmQR0GZBHQY/Vu9JY4gmsHPOmrTZOjmtypIJhQaPX58ni9dehgbcw5IprnHR5Jc+rV+fd8L/m+yhuTrqigAhxnhpql0ZA/CaQx42EOX1FQDGzBDZyFzdLYumRTGE+KlrV8+AA/vd5wAAAAAAP/jjJ06853a5qUfbc0sYRuh//vj4s/LfYjIWNhDx3LMp6cLPgL7EAPVhxe0vgnUe2TsXqh53s6HctmN9PTmxt5Ri73/0X7KsIpRflr81ISaZdz4B8/RIaQNE0hrdP/Tgwu4DwnjjJ06853a5qUfbc0sYRuh//vj4s/LfYjIWNhDx3LMp6cLPgL7EAPVhxe0vgnUe2TsXqh53s6HctmN9PTmxt5Ri73/0X7KsIpRflr81ISaZdz4B8/RIaQNE0hrdP/Tgwu4DmXYeJkS+0neuw2hweXVim1hbK8Y1rwnsUc4KjgpHUN248XP2ufVVeneqyq1/Fb92v/t5n/+30HhMhJRQQlAgrnwWzP1vz0gVnN2vBypbG15nrc4Wqk4O5vId0vuYz6LVG287IouH7Jy/e93VYHGxPlr9AtxRdfvZOX73z+4unl9FqjbedkUXD9k5fvfEfvSaHrxtIHLVT4xTVd8UX4YlIIULdIu72chE7/d5MgdbkZfNbbWFk8HjPNj62wZ3/0RenFhKiOU+9QFpsYUJ0CrZIB/u4doTNbVsIl5FPPGzysJAertaUF/61+KVrdfjXhtSQkcUBRX1BRqs7JEUveO1h8LKig/vuBizea/7Y9NJIarT63Y0fBAa+dCSOqwkcGRdLzlYashEAGKSU4HW8qzUenEGuYPVl7vR9F9zCpyffG7nOnRNE3ZTI0dZy5wwTBEDu5jgJHh6EengAgNenk7YTjyX4rM+xCaKSK+OX2c4oMWhG0ooVKDiLQbaqlCOi9Qc6/+lyax9MMNQF7qfd9PgwD4LUqLjrnEVMtCpG04SrcasMSLjbxjgwUe8dG+tKE1+cOn6wW4PKUS/55KUK1aiDGHPWWeoxG/Eob8+huNZzyXN9q36CWeYi1SnFxccuw5KJIi/0wqZ2DUrqkTiLL8F93PvzQWblOZHDbk6vfe8j1NEsSz2DOy1OyeX3HP21DIbjPDK+zQA7YyQ/jVP6oTwWnS3LaLAfkULiK+xeNZcsYfLSo/AXUlqNNc0jvWzx6HIqTT7B49uRwYfjbjJ7YKpxgnEENrUhZ97oqkTr+efyi67zayzHYxFfL4qx7WYP8HO1HAHHP/OVw7QEUETlOzSa5ZwWEFHvYScYJ/UwciSeDPdbgTKibfdI87n7CyqfoZTXFH+D0LYAAAA=",T="/static_blog/assets/image-20200921181305551-DxcaNReK.png",A="/static_blog/assets/image-20210331160948708-G1yE-WyI.png",E="/static_blog/assets/image-20210915145032445-DGTjgW36.png",D="/static_blog/assets/153802557624752e85feeed-8gCmYtPh.png",L="/static_blog/assets/15380256636038c4d44912e-DECGlAMm.png",O="/static_blog/assets/1538025799063ed1e9da3cf-DORFSpbw.png",C="/static_blog/assets/image-20211013215645301-C2JBdc2s.png",H={},N=t(`<h2 id="javascript" tabindex="-1"><a class="header-anchor" href="#javascript"><span>JavaScript</span></a></h2><h2 id="js理念" tabindex="-1"><a class="header-anchor" href="#js理念"><span>JS理念</span></a></h2><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">### JS 是什么？</span>
- 解析执行，轻量级解析型，一行一行解析的。
- 是一种运行在客户端的脚本语言，不需编译，运行过程中由js解释器<span class="token punctuation">(</span>js引擎<span class="token punctuation">)</span>逐行进行解释并执行；
- js来源：借鉴了c语言、java语言等 --<span class="token operator">&gt;</span> <span class="token punctuation">(</span>简化式<span class="token punctuation">)</span>函数式编程 +（简化式）面向对象编程；
- ES6既是一个历史名词，也是泛指5.1版本后的js的下一个标准。


<span class="token comment">### JS 的组成</span>
JS严格意义上来说分为：语言标准部分（ESCMAScript）+ 宿主环境部分。
	- 在浏览器中，宿主环境包括 DOM + BOM 等。
	- 在 Nod 中，宿主环境包括一些文件、数据库、网络、操作系统的交互等。
<span class="token number">1</span>. ECMAScript<span class="token punctuation">(</span>js语法规范<span class="token punctuation">)</span>：包括变量、表达式、运算符、函数、if语句、for语句等。
<span class="token number">2</span>. BOM:文档对象模型<span class="token punctuation">(</span>Document object Model<span class="token punctuation">)</span>：onload页面加载事件、window顶级对象；定时器；location、history
<span class="token number">3</span>. DOM:浏览器对象模型<span class="token punctuation">(</span>Browser Object Model<span class="token punctuation">)</span>：获取页面元素、注册事件；属性、样式操作；节点属性、节点层级；动态创建元素


<span class="token comment">### JS 引入方式</span>
<span class="token number">1</span>. 行内式
<span class="token number">2</span>. 内嵌式
<span class="token number">3</span>. 外部引入式


<span class="token comment">### JS 的特点</span>
- 解释性：C语言为编译性
- 基于对象：什么是对象
- 事件驱动：onclick、onmouseover、onmouseout
- 跨平台性：只跟浏览器有关
- 安全性：不允许访问硬盘，不能对网络文件进行修改和删除


<span class="token comment">### JS 全局函数</span>
- <span class="token number">6</span>个编码相关：<span class="token variable"><span class="token variable">\`</span>escape<span class="token punctuation">(</span><span class="token punctuation">)</span>、unescape<span class="token punctuation">(</span><span class="token punctuation">)</span>、encodeURL<span class="token punctuation">(</span><span class="token punctuation">)</span>、decodeURL<span class="token punctuation">(</span><span class="token punctuation">)</span>、encodeURLComponent<span class="token punctuation">(</span><span class="token punctuation">)</span>、decodeURLComponent<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>
- <span class="token number">2</span>个数据处理：<span class="token variable"><span class="token variable">\`</span>Number<span class="token punctuation">(</span><span class="token punctuation">)</span>、String<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>
- <span class="token number">4</span>个数字相关：<span class="token variable"><span class="token variable">\`</span>isFinite<span class="token punctuation">(</span><span class="token punctuation">)</span>、isNaN<span class="token punctuation">(</span><span class="token punctuation">)</span>、parseInt<span class="token punctuation">(</span><span class="token punctuation">)</span>、parseFloat<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>
- <span class="token number">1</span>个特殊：<span class="token variable"><span class="token variable">\`</span>eval<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="抽象语法树ast" tabindex="-1"><a class="header-anchor" href="#抽象语法树ast"><span>抽象语法树<code>AST</code></span></a></h3><ul><li>抽象语法和抽象语法树就是<strong>源代码的抽象语法结构的树状表现形式</strong></li><li>浏览器通过<code>javascript Parser</code>解析器将js代码转化为抽象语法树来进行下一步的分析等其他操作。所以将js转化为抽象语法树更利于程序的分析。</li><li>常用的<code>javascript Parser</code>：esprima、traceur、acorn、shift。</li></ul><p><strong>抽象语法树的作用</strong></p><ul><li><p>代码语法的检查，代码风格的检查，代码的格式化，代码的高亮，代码错误提示，代码自动补全等等</p><blockquote><p>如：JSLint、JSHint 对代码错误或风格的检查，发现一些潜在的错误 IDE的错误提示，格式化，高亮，自动补全等等 代码的混淆压缩 如：UglifyJS2等</p></blockquote></li><li><p>优化变更代码，改变代码结构达到想要的结构</p><blockquote><p>代码打包工具webpack，rollup等等 CommonJS、AMD、CMD、UMD等代码规范之间的转化 CoffeeScript、TypeScript、JSX等转化为原生Javascript</p></blockquote></li></ul><h3 id="一次js请求的缓存处理" tabindex="-1"><a class="header-anchor" href="#一次js请求的缓存处理"><span>一次js请求的缓存处理</span></a></h3><ul><li><code>DNS</code>缓存：短时间内多次访问某个网站，在限定时间内，不用多次访问DNS服务器</li><li><code>CDN</code>缓存：内容分发网络，就近节点获取</li><li>浏览器缓存：浏览器在用户磁盘上，对最新请求过的文档进行了存储</li><li>服务器缓存：将需要频繁访问的Web页面和对象保存在离用户更近的系统中，当再次访问这些对象时加快访问速度。</li></ul><h2 id="js在浏览器的运行机制" tabindex="-1"><a class="header-anchor" href="#js在浏览器的运行机制"><span>JS在浏览器的运行机制</span></a></h2><h3 id="进程与线程" tabindex="-1"><a class="header-anchor" href="#进程与线程"><span>进程与线程</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 进程与线程</span>
CPU -<span class="token operator">&gt;</span> 进程 -<span class="token operator">&gt;</span> 线程

<span class="token comment">### 进程</span>
- CPU 是计算机的核心，承担所有的计算任务。
- 进程是 CPU 资源分配的最小单位。
- 进程包括运行中的程序和程序中所使用的内存和系统资源。
- CPU 可以有很多进程，但 CPU 所拥有的资源空间是固定的，CPU 给每个进行分配资源空间，分出去的资源空间越多就会导致平均分配的内存不足而导致卡顿。每个进程之间是相互独立的，CPU 在运行一个进程时，其他的进程处于非运行状态，CPU 使用 <span class="token variable"><span class="token variable">\`</span>时间片轮转调度法<span class="token variable">\`</span></span> 来实现同时运行多个进程。


<span class="token comment">### 线程</span>
- 线程是 CPU 调度的最小单位。
- 线程是建立在进程的基础上的一次程序运行单位，线程是程序中的一个执行流，一个进程可以有多个线程。
- 一个进程中只有一个执行流称作单线程，即程序执行时，所走的程序路径按照连续顺序排下来，前面的必须处理好，后面的才会执行。
- 一个进程中有多个执行流称作多线程，即一个程序中可以同时运行多个不同的线程来行执行不同的任务。
	

<span class="token comment">### 进程和线程的区别</span>
- 进程是操作系统分配资源的最小单位，线程是程序执行的最小单位。
		（CPU 分配足够多资源给一个应用，应用可调用多个线程执行任务，但分配给应用的运行内存是有限的，当线程运行过多就会因为运行内存不足导致卡顿）
- 一个进程由一个或多个线程组成，线程可以理解为是一个进程中代码的不同执行路线。
- 进程之间相互独立，但同一进程下的各个线程间共享程序的内存空间（包括代码段、数据集、堆等）及一些进程级的程序（如打开文件和信号）
- 调度和切换：线程上下文切换比进程上下文切换要快得多。


<span class="token comment">### 多进程和多线程</span>
<span class="token number">1</span>. 多进程：
- 多进程指的是在同一时间里，同一个计算机系统中如果允许两个或两个以上的进程处于运行状态。
- 多线程的好处：如在网易云听歌的同时打开编辑器敲代码，编辑器和网易云的进程之间不会相互干扰。

<span class="token number">2</span>. 多线程：
- 多线程是指程序中包含多个执行流，即一个程序中可以同时运行多个不同的线程来行执行不同的任务。



<span class="token comment">### JS 为什么是单线程</span>
JS 的单线程与它的用途有关。作为浏览器脚本语言，JavaScript 的主要用途是与用户互动，以及操作DOM。这决定了它只能是单线程，否则会带来很复杂的同步问题。比如，假定 JS 同时有两个线程，一个线程在某个 DOM 节点上添加内容，另一个线程删除了这个节点，这时浏览器就不确定以哪个线程为准。
为了利用多核CPU的计算能力，HTML5 提出 WebWorker 标准，允许 JS 脚本创建多个线程，但是子线程是完全受主线程控制，而且不得操作 DOM。所以这个标准并没有改变 JavaScript 是单线程的本质。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="浏览器" tabindex="-1"><a class="header-anchor" href="#浏览器"><span>浏览器</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 浏览器</span>
<span class="token comment">### 浏览器是多进程的</span>
- 浏览器是多线程的，如Chrome浏览器，我们每打开一个 Tab 页就会产生一个进程，每个进程又有很多线程，都会占用内部才能，这也以为这内存等资源消耗会很大，因此当Chrome运行时间长了就会导致电脑会越来越卡。
- 浏览器需要多进程的原因：如果浏览器是单线程，当某个Tab页、插件崩溃，就影响了整个浏览器，影响用户体验感


<span class="token comment">### 浏览器包含的进程</span>
<span class="token number">1</span>. Browser 进程
    - 浏览器的主进程（负责协调、主控），该进程只有一个。
    - 负责浏览器界面显示，与用户交互。如页面的前进、后退等。
    - 负责各个页面的管理，创建和销毁其他进程。
    - 将渲染<span class="token punctuation">(</span>Renderer<span class="token punctuation">)</span>进程得到的内存中的 Bitmap<span class="token punctuation">(</span>位图<span class="token punctuation">)</span>，绘制到用户界面上。
    - 网络资源的管理、下载等。

<span class="token number">2</span>. 第三方插件进程
		- 每种类型的插件对应一个进程，当使用该插件时才创建。

<span class="token number">3</span>. GPU 进程
		- 该进程也只有一个，用于 3D 绘制等等。

<span class="token number">4</span>. 渲染进程（重点）
    - 浏览器内核（Renderer进程，其内部是多线程）。
    - 每个 Tab 页面都有一个渲染进程，互不影响。
    - 主要作为页面渲染、脚本执行、事件处理等。


<span class="token comment">### 渲染进程 Renderer 的主要进程</span>
<span class="token comment">#### GUI 渲染线程</span>
- 负责渲染浏览器界面，解析HTML、CSS、构建DOM树和RenderObject树，布局和绘制等。
    <span class="token number">1</span>. 解析html代码（HTML代码本质是字符串）转化为浏览器认识的节点，生成 DOM树（DOM Tree）
    <span class="token number">2</span>. 解析 CSS，生成 CSS规则树（CSSOM）
    <span class="token number">3</span>. 把 DOM Tree 和 CSSOM 结合，生成渲染树（Rendering Tree）
- 当修改元素的尺寸等，页面就会回流<span class="token punctuation">(</span>Reflow<span class="token punctuation">)</span>。
- 当修改如一些元素的颜色或背景色，页面就会重绘<span class="token punctuation">(</span>Repaint<span class="token punctuation">)</span>。
- 当页面需要 Repaint 和 Reflow 时， GUI 线程执行，绘制页面。
- 回流<span class="token punctuation">(</span>Reflow<span class="token punctuation">)</span>比重绘<span class="token punctuation">(</span>Repaint<span class="token punctuation">)</span>的成本要高，我们要尽量避免 Reflow 和 Repaint。
- GUI 渲染线程与 JS 引擎线程是互斥的
		- 当 JS 引擎执行时 GUI 线程会被挂起（相当于被冻结）。
		- GUI 更新会被保存在一个队列中等到 JS 引擎空闲时立即被执行。


<span class="token comment">#### JS 引擎线程</span>
- JS 引擎就是 JS 内核，负责处理 JavaScript 脚本程序（例如 V8 引擎）
- JS 引擎线程负责解析 JavaScript 脚本，运行代码。
- JS 引擎一直等待任务队列中任务的到来，然后加以处理。
		- 浏览器同时只能有一个 JS 引擎线程在运行 JS 程序，所以js是单向成运行的。
		- 浏览器一个Tab页<span class="token punctuation">(</span>renderer进程<span class="token punctuation">)</span>中无论什么时候都只有一个 JS 线程在运行 JS 程序。
- GUI 渲染线程与 JS 引擎线程是互斥的，JS 引擎线程会阻塞 GUI 渲染线程。
		- 就是我们常遇到的 JS 执行时间过长，造成页面渲染不连贯，导致页面渲染加载阻塞（页面加载缓慢）
		- 例如浏览器渲染时遇到 script 标签，就会停止 GUI 的渲染，然后 JS 引擎线程开始工作，执行里面的js代码，等js执行完毕，JS 引擎线程停止工作，GUI 继续渲染下面的内容。如果js执行时间太长就会造成页面卡顿的情况。


<span class="token comment">#### 事件触发线程</span>
- 属于浏览器而不是 JS 引擎，用来控制事件循环，并且管理着一个事件队列（task queue）
- 当js执行碰到事件绑定和一些异步操作（如setTimeOut，也可来自浏览器内核的其他线程，如鼠标点击、AJAX异步请求等），会走事件触发线程将对应的事件添加到对应的线程中（比如定时器操作，便把定时器事件添加到定时器线程），等异步事件有结果，便把它们的回调操作添加到事件队列，等待 JS 引擎线程空闲时来处理。
- 当对应的事件符合触发条件被触发时，该线程会把事件添加到待处理队列的队尾，等待 JS 引擎的处理。
- 因为 JS 是单线程的，所以这些待处理队列中的事件都得排队等待 JS 引擎处理。


<span class="token comment">#### 定时触发器线程</span>
- setInterval 与 setTimeout 所在的线程。
- 浏览器定时计数器并不是由 JavaScript 引擎计数的（因为 JS 引擎是单线程的，如果处于阻塞线程状态，就会影响计时的准确）
- 通过单独线程来计时并触发定时（计时完毕后，添加到事件触发线程的事件队列中，等待 JS 引擎空闲后执行），这个线程就是定时触发器线程，也叫定时器线程。
- W3C 在 HTML 标准中规定，规定要求 setTimeout 中低于 4ms 的时间间隔计算为 4ms。


<span class="token comment">#### 异步 http 请求线程</span>
- 在XMLHttpRequest 在连接后是通过浏览器新开一个线程请求。
- 将检测到状态变更时。如果设置有回调函数，异步线程就产生状态变更事件，将整个回调再放入事件队列中，再由 JavaScript 引擎执行。
- 简单说就是当执行一个 http 异步请求时，就把异步请求事件添加到异步请求线程，等收到响应（准确说应该是http状态变化），再把回调函数添加到事件队列，等待 JS 引擎线程来执行。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="事件循环-event-loop" tabindex="-1"><a class="header-anchor" href="#事件循环-event-loop"><span>事件循环 Event Loop</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 事件循环 Event Loop</span>
JS 分为同步任务和异步任务。
同步任务都在主线程（JS引擎线程）上执行，会形成一个执行栈；
主线程之外，事件触发线程管理着一个任务队列，只要异步任务有了运行结果，就在任务队列之中放一个事件回调；
一旦执行栈中的所有同步任务执行完毕（也就是JS引擎线程空闲），系统就会读取任务队列，将可运行的异步任务（任务队列中的事件回调，只要任务队列中有事件回调，就说明可以执行）添加到执行栈中，开始执行。



<span class="token comment">### 执行说明</span>
浏览器上的所有线程的工作都很单一且独立，非常符合单一原则。
- <span class="token string">&#39;定时触发线程&#39;</span> 只管理定时器，且只关注定时不关心结果，定时结束就把回调扔给事件触发线程。
- <span class="token string">&#39;异步http请求线程&#39;</span> 只管理异步请求，同样不关心结果，请求结束就把回调扔给事件触发线程。
- <span class="token string">&#39;事件触发线程&#39;</span> 只关心异步回调入事件队列。
- <span class="token string">&#39;JS引擎线程&#39;</span> 只会执行栈中的事件，执行栈中的代码执行完毕，就会读取事件队列中的事件并添加到执行栈中继续执行，这样反反复复的执行事件就是事件循环<span class="token punctuation">(</span>Event Loop<span class="token punctuation">)</span>



<span class="token comment">### 执行顺序</span>
JS是按照顺序从上往下执行的，可以先理解为这段代码的执行环境就是主线程，也就是当前执行栈。
<span class="token number">1</span>. 首先，执行 <span class="token variable"><span class="token variable">\`</span>console.log<span class="token punctuation">(</span><span class="token string">&#39;同步任务1&#39;</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>
<span class="token number">2</span>. 接着执行到 setTimeout 时，会移交给<span class="token string">&#39;定时器线程&#39;</span>，通知定时器线程 0s 后将 setTimeoutCallback 这个回调交给<span class="token string">&#39;事件触发线程&#39;</span>处理，在 0s 后事件触发线程会受到 setTimeoutCallback 这个回调并把它加入到 <span class="token string">&#39;事件触发线程&#39;</span> 所管理的事件队列中等待执行。
<span class="token number">3</span>. 接着执行 http 请求，会移交给 <span class="token string">&#39;异步http请求线程&#39;</span> 发送网络请求，请求成功后将 httpCallback 这个回调交由事件触发线程处理， <span class="token string">&#39;事件触发线程&#39;</span> 收到 httpCallback 这个回调后把它加入到 <span class="token string">&#39;事件触发线程&#39;</span> 所管理的事件队列中等待执行。
<span class="token number">4</span>. 再接着执行 <span class="token variable"><span class="token variable">\`</span>console.log<span class="token punctuation">(</span><span class="token string">&#39;同步任务2&#39;</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>
<span class="token number">5</span>. 至此主线程执行栈中执行完毕，<span class="token string">&#39;JS引擎线程&#39;</span> 已经空闲，开始向 <span class="token string">&#39;事件触发线程&#39;</span> 发起询问，询问<span class="token string">&#39;事件触发线程&#39;</span>的事件队列中是否有需要执行的回调函数，如果有将<span class="token string">&#39;事件队列&#39;</span>中的回调事件加入执行栈中，开始执行回调，如果事件队列中没有回调，<span class="token string">&#39;JS引擎线程&#39;</span>会一直发起询问，直到有为止。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">### 事件执行案例</span>
<span class="token builtin class-name">let</span> setTimeoutCallback <span class="token operator">=</span> <span class="token function-name function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console.log<span class="token punctuation">(</span><span class="token string">&#39;定时器回调&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token builtin class-name">let</span> httpCallback <span class="token operator">=</span> <span class="token function-name function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console.log<span class="token punctuation">(</span><span class="token string">&#39;http请求回调&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console.log<span class="token punctuation">(</span><span class="token string">&#39;同步任务1&#39;</span><span class="token punctuation">)</span>
setTimeout<span class="token punctuation">(</span>setTimeoutCallback, <span class="token number">0</span><span class="token punctuation">)</span>
Promise.resolve<span class="token punctuation">(</span><span class="token punctuation">)</span>.then<span class="token punctuation">(</span>httpCallback<span class="token punctuation">)</span>
console.log<span class="token punctuation">(</span><span class="token string">&#39;同步任务2&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+e+`" alt="image-20230220184442313"></p></blockquote><h3 id="宏任务-微任务" tabindex="-1"><a class="header-anchor" href="#宏任务-微任务"><span>宏任务 &amp; 微任务</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">### 浏览器事件循环\`Event Loop\`</span>
<span class="token number">1</span>. 不同的任务源会被分配到不同的<span class="token variable"><span class="token variable">\`</span>Task<span class="token variable">\`</span></span>队列中，任务源分为微任务<span class="token punctuation">(</span>task<span class="token punctuation">)</span>和宏任务<span class="token punctuation">(</span>jobs<span class="token punctuation">)</span>
<span class="token number">2</span>. 首先 <span class="token string">&#39;执行同步代码&#39;</span>，这属于宏任务<span class="token punctuation">(</span><span class="token variable"><span class="token variable">\`</span>script、setTimeout、setInterval、setImmediate、I/O、UI rendering<span class="token variable">\`</span></span><span class="token punctuation">)</span>
<span class="token number">3</span>. 当执行完所有<span class="token string">&#39;同步代码&#39;</span>后，执行栈为空，查询是否有异步代码需要执行
<span class="token number">4</span>. <span class="token string">&#39;执行所有微任务&#39;</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">\`</span>process.nextTick、promise、MutationObserver<span class="token variable">\`</span></span><span class="token punctuation">)</span>
<span class="token number">5</span>. 当执行完所有微任务后，如有必要，会<span class="token string">&#39;渲染页面&#39;</span>
<span class="token number">6</span>. 然后开始下一轮<span class="token variable"><span class="token variable">\`</span>Event Loop<span class="token variable">\`</span></span>，<span class="token string">&#39;执行宏任务的异步代码&#39;</span>，即<span class="token variable"><span class="token variable">\`</span>setTimeout、setInterval<span class="token variable">\`</span></span>中的回调事件。


<span class="token comment">#### 宏任务（macrotask）</span>
- 在 ECMAScript 中，macrotask 也被称为 task。
- 我们可以将每次执行栈执行的代码当做是一个宏任务（包括每次从事件队列中获取一个事件回调并放到执行栈中执行），每一个宏任务会从头到尾执行完毕，不会执行其他。
- 由于 <span class="token string">&#39;JS引擎线程&#39;</span> 和 <span class="token string">&#39;GUI渲染线程&#39;</span> 是互斥关系，浏览器为了能够使 <span class="token string">&#39;宏任务&#39;</span> 和 <span class="token string">&#39;DOM任务&#39;</span> 有序进行，会在一个 <span class="token string">&#39;宏任务&#39;</span> 执行结果后，在下一个 <span class="token string">&#39;宏任务&#39;</span> 执行前，<span class="token string">&#39;GUI渲染线程&#39;</span> 开始工作，对页面进行渲染。
- 执行顺序：<span class="token string">&#39;宏任务 -&gt; GUI渲染 -&gt; 宏任务 -&gt; ...&#39;</span>
- 常见的宏任务：<span class="token string">&#39;主代码块、setTimeout、setInterval、Node的setImmediate()、浏览器的requestAnimationFrame&#39;</span>。


<span class="token comment">#### 微任务（maicrotask）</span>
- ES6新引入Promise标准，同时浏览器实现上多了一个<span class="token variable"><span class="token variable">\`</span>maicrotask<span class="token variable">\`</span></span>微任务概念，在ECMAScript中，<span class="token variable"><span class="token variable">\`</span>maicrotask<span class="token variable">\`</span></span> 也称为 <span class="token variable"><span class="token variable">\`</span><span class="token function">jobs</span><span class="token variable">\`</span></span>。
- 当<span class="token string">&#39;宏任务&#39;</span>结束后，会执行渲染，然后执行下一个<span class="token string">&#39;宏任务&#39;</span>，而<span class="token string">&#39;微任务&#39;</span>可以理解成在当前<span class="token string">&#39;宏任务&#39;</span>执行后立即执行的任务。
- 当一个<span class="token string">&#39;宏任务&#39;</span>执行完，会在渲染前，将执行期间所产生的所有<span class="token string">&#39;微任务&#39;</span>都执行完。
- 执行顺序：<span class="token string">&#39;宏任务 -&gt; 微任务 -&gt; GUI渲染 -&gt; 宏任务 -&gt; ...&#39;</span>
- 常见微任务：<span class="token string">&#39;Promise.then()、catch、Promise.finally、Object.observe、MutationObserver、Node的process.nextTick()&#39;</span>


<span class="token comment">#### 宏任务微任务注意点</span>
- 浏览器会先执行一个宏任务，紧接着执行当前执行栈产生的微任务，再进行渲染，然后再执行下一个宏任务。
- 微任务和宏任务不在一个任务队列。
- 例如 setTimeout 是一个宏任务，它的事件回调在宏任务队列；Promise.then<span class="token punctuation">(</span><span class="token punctuation">)</span> 是一个微任务，它的事件回调在微任务队列，二者并不是一个任务队列。
- 以 Chrome 为例，有关渲染的都是在渲染进程中执行，渲染进程中的任务（DOM树构建、jS解析等）需要主线程执行的任务都会在主线程中执行，而浏览器维护了一套事件循环机制，主线程上的任务都会放到消息队列中执行，主线程会循环消息队列，并从头部取出任务进行执行，如果执行过程中产生其他任务需要主线程执行的，渲染进程中的其他线程会把该任务塞入到消息队列的尾部，消息队列中的任务都是宏任务。
- 微任务的产生：当执行到 script 脚本时，JS 引擎会为全局创建一个执行上下文，在该执行上下文中维护了一个微任务队列，当遇到微任务，就会把微任务回调放在微任务队列，当所有的js代码执行完毕，在退出全局上下文之前引擎会去检查该队列，有回调就执行，没有就退出执行上下文。这就是微任务要早于宏任务的原因，即是说每个宏任务都有一个微任务队列（由于定时器是浏览器的API，所以定时器是宏任务，在js中遇x到定时器也是放在浏览器的队列中）。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+p+`" alt="image-20211017214635189"></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;script start&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async1 end&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async2 end&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;setTimeout&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Promise&#39;</span><span class="token punctuation">)</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise1&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise2&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;script end&#39;</span><span class="token punctuation">)</span>

<span class="token comment">/* 
script start
async2 end
Promise
script end
promise1
promise2
async1 end
setTimeout */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="完整的事件循环-event-loop" tabindex="-1"><a class="header-anchor" href="#完整的事件循环-event-loop"><span>完整的事件循环 Event Loop</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 完整的事件循环 Event Loop</span>
<span class="token number">1</span>. 首先，整体的 script 作为第一个宏任务开始执行时，会把所有代码分为 <span class="token string">&#39;同步任务、异步任务&#39;</span> 两部分。
<span class="token number">2</span>. 同步任务会直接进入主线程依次执行。
<span class="token number">3</span>. 异步任务会再分为宏任务和微任务。
	<span class="token number">3.1</span>. 宏任务进入到 EventTable 中，并在里面注册回调函数，每当指定的事件完成时，Event Table 会将整个函数移到 Event Queue 中。
	<span class="token number">3.2</span> 微任务会进入到另一个 EventTable 中，并在里面注册回调函数，每当指定事件完成时，EventTable 会将整个函数移交到 Event Queue 中。
<span class="token number">4</span>. 当主线程内的任务执行完毕，主线程为空时，会检查微任务的 Event Queue，如果有任务，就全部执行，如果没有就执行下一个宏任务。
<span class="token number">5</span>. 上述事件过程会不断重复（例如进入下一个 script 标签执行），这就是 Event Loop。



<span class="token comment">### 关于 Promise</span>
- 如 <span class="token variable"><span class="token variable">\`</span>new Promise<span class="token punctuation">((</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">))</span>.then<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>
		- 前面的 <span class="token variable"><span class="token variable">\`</span>new Promise<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span> 这一部分是一个构造函数，这是一个同步任务。
		- 后面的 <span class="token variable"><span class="token variable">\`</span>.then<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span> 才是一个异步任务。
		
      new Promise<span class="token variable"><span class="token punctuation">((</span>resolve<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> {
        console.log<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        resolve<span class="token punctuation">(</span><span class="token punctuation">)</span>
      }<span class="token punctuation">)</span>.then<span class="token punctuation">((</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> {
        console.log<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      }<span class="token punctuation">)</span>
      console.log<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
      <span class="token operator">/</span><span class="token operator">/</span> 会输出：<span class="token number">1</span> <span class="token number">3</span> <span class="token number">2</span>



### 关于 async<span class="token operator">/</span>await 函数
<span class="token operator">-</span> async<span class="token operator">/</span>await 本质上是基于 Promise 的一些封装，而 Promise 是属于微任务的一种。
		所以在使用 await 关键字与 Promise.then<span class="token punctuation">(</span><span class="token punctuation">)</span> 效果类似。
		await 关键字之前的代码，相当于 new Promise<span class="token punctuation">(</span><span class="token punctuation">)</span> 的同步代码，await 以后的代码相当于 Promise.then<span class="token punctuation">(</span><span class="token punctuation">)</span> 的异步。

    setTimeout<span class="token punctuation">((</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console.log<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">))</span></span>
    async <span class="token keyword">function</span> <span class="token function-name function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console.log<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      await Promise.resolve<span class="token punctuation">(</span><span class="token punctuation">)</span>
      console.log<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    test<span class="token punctuation">(</span><span class="token punctuation">)</span>
    console.log<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
    // 会输出： <span class="token number">2</span> <span class="token number">4</span> <span class="token number">3</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+l+`" alt="image-20230221095738520"></p></blockquote><h3 id="nodejs中的运行机制" tabindex="-1"><a class="header-anchor" href="#nodejs中的运行机制"><span>NodeJS中的运行机制</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## NodeJS 中的运行机制</span>
- 虽然 NodeJS 中的 JavaScript 运行环境也是 V8 引擎，也是单线程，但还是有些与浏览器中的表现是不一样的。
- nodejs 与浏览器的区别是，nodejs 的宏任务分好几种类型，而这号几种又有不同的任务队列，而不同的任务队列又有顺序区别，而微任务是穿插在每一种宏任务之间的。
- 在 <span class="token function">node</span> 环境下，process.nextTick 的优先级高于 Promise，可以简单理解为在宏任务结束后会先执行微任务队列中的 nextTickQueue 部分，然后才执行微任务中的 Promise 部分。
- 浏览器和 Node 环境下，microtask 任务队列的执行时机不同
    - Node 端，microtask 在事件循环的各个阶段之间执行
    - 浏览器端，microtask 在事件循环的 macrotask 执行完之后执行


<span class="token comment">### NodeJS 的 EventLoop</span>
<span class="token number">1</span>. <span class="token function">node</span> 会执行所有类型为 timers 的 MacroTask，然后执行所有的 MicroTask（NextTick例外）
<span class="token number">2</span>. 进入 poll 阶段，执行几乎所有 MacroTask，然后执行所有的 MicroTask。
<span class="token number">3</span>. 再执行所有类型为 check 的 MacroTask，然后执行所有的 MicroTask。
<span class="token number">4</span>. 再执行所有类型为 close callbacks 的 MacroTask，然后执行所有的 MicroTask。
<span class="token number">5</span>. 至此，完成一个 Tick，回到 timers 阶段，不断的进行循环执行。


<span class="token comment">### 浏览器中的 EventLoop</span>
<span class="token number">1</span>. 先执行一个 MacroTask，然后执行所有的 MicroTask。
<span class="token number">2</span>. 再执行一个 MacroTask，然后执行所有的 MrcroTask。
<span class="token number">3</span>. 不断地循环执行上述的过程。


<span class="token comment">### NodeJS 的执行过程</span>
外部输入数据 –<span class="token operator">&gt;</span> 轮询阶段<span class="token punctuation">(</span>poll<span class="token punctuation">)</span> –<span class="token operator">&gt;</span> 检查阶段<span class="token punctuation">(</span>check<span class="token punctuation">)</span> –<span class="token operator">&gt;</span> 关闭事件回调阶段<span class="token punctuation">(</span>close callback<span class="token punctuation">)</span> –<span class="token operator">&gt;</span> 定时器检测阶段<span class="token punctuation">(</span>timers<span class="token punctuation">)</span> –<span class="token operator">&gt;</span> I/O事件回调阶段<span class="token punctuation">(</span>I/O callbacks<span class="token punctuation">)</span> –<span class="token operator">&gt;</span> 闲置阶段<span class="token punctuation">(</span>idle, prepare<span class="token punctuation">)</span> –<span class="token operator">&gt;</span> 轮询阶段（按照该顺序反复运行）…
- timers 阶段：这个阶段执行 timer（setTimeout、setInterval）的回调
- I/O callbacks 阶段：处理一些上一轮循环中的少数未执行的 I/O 回调
- idle, prepare 阶段：仅 <span class="token function">node</span> 内部使用
- poll 阶段：获取新的 I/O 事件, 适当的条件下 <span class="token function">node</span> 将阻塞在这里
- check 阶段：执行 setImmediate<span class="token punctuation">(</span><span class="token punctuation">)</span> 的回调
- close callbacks 阶段：执行 socket 的 close 事件回调
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+o+`" alt="img"></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">### 浏览器与nodejs 事件循环执行案例</span>
setTimeout<span class="token punctuation">((</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
  console.log<span class="token punctuation">(</span><span class="token string">&#39;timer1&#39;</span><span class="token punctuation">)</span>
  Promise.resolve<span class="token punctuation">(</span><span class="token punctuation">)</span>.then<span class="token punctuation">(</span><span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console.log<span class="token punctuation">(</span><span class="token string">&#39;promise1&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>, <span class="token number">0</span><span class="token punctuation">)</span>
setTimeout<span class="token punctuation">((</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
  console.log<span class="token punctuation">(</span><span class="token string">&#39;timer2&#39;</span><span class="token punctuation">)</span>
  Promise.resolve<span class="token punctuation">(</span><span class="token punctuation">)</span>.then<span class="token punctuation">(</span><span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console.log<span class="token punctuation">(</span><span class="token string">&#39;promise2&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>, <span class="token number">0</span><span class="token punctuation">)</span>


<span class="token comment">### 浏览器端运行结果：timer1 =&gt; promise1 =&gt; timer2 =&gt; promise2</span>


<span class="token comment">### Node 端运行结果：timer1 =&gt; timer2 =&gt; promise1 =&gt; promise2</span>
全局脚本（main<span class="token punctuation">(</span><span class="token punctuation">)</span>）执行，将 <span class="token number">2</span> 个 timer 依次放入 timer 队列，main<span class="token punctuation">(</span><span class="token punctuation">)</span>执行完毕，调用栈空闲，任务队列开始执行；
首先进入 timers 阶段，执行 timer1 的回调函数，打印 timer1，并将 promise1.then 回调放入 microtask 队列，同样的步骤执行 timer2，打印 timer2；
至此，timer 阶段执行结束，event loop 进入下一个阶段之前，执行 microtask 队列的所有任务，依次打印 promise1、promise2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>浏览器处理结果</strong></p><p><img src="`+c+'" alt="img"></p><p><strong>Nodejs处理结果</strong></p><p><img src="'+i+`" alt="img"></p></blockquote><h3 id="浏览器渲染原理" tabindex="-1"><a class="header-anchor" href="#浏览器渲染原理"><span>浏览器渲染原理</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 浏览器渲染原理</span>
<span class="token comment">### 浏览器渲染流程</span>
- 解析html -<span class="token operator">&gt;</span> 构建DOM树/CSS Rule Tree -<span class="token operator">&gt;</span> 构建render树 -<span class="token operator">&gt;</span> 布局render树 -<span class="token operator">&gt;</span> 绘制render树


<span class="token comment">### 浏览器解析过程</span>
<span class="token number">1</span>. DOM Tree：浏览器会将HTML解析成一个DOM树，
		DOM 树的构建过程是一个深度遍历过程：当前节点的所有子节点都构建好后才会去构建当前节点的下一个兄弟节点。
<span class="token number">2</span>. CSS rule tree：将CSS解析成树形的数据结构
<span class="token number">3</span>. Render Tree: 根据DOM树和CSSOM来构造Render Tree
    此时浏览器已经能知道网页中有哪些节点、各个节点的CSS定义以及他们的从属关系；
    但并不知道节点的位置，需要依靠接下来的layout。
<span class="token number">4</span>. layout：计算出每个节点在屏幕中的位置<span class="token punctuation">(</span>宽高、颜色等<span class="token punctuation">)</span>
<span class="token number">5</span>. 绘制<span class="token punctuation">(</span>painting<span class="token punctuation">)</span>：即遍历render树，并使用UI后端层绘制每个节点到页面上
注意：上述这个过程是逐步完成的，为了更好的用户体验，渲染引擎将会尽可能早的将内容呈现到屏幕上，并不会等到所有的html都解析完成之后再去构建和布局render树。它是解析完一部分内容就显示一部分内容，同时，可能还在通过网络下载其余内容。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>webkit的流程</strong></p><p><img src="`+u+'" alt="image-20210914235451051"></p><p><strong>Geoko的流程</strong></p><p><img src="'+r+`" alt="image-20210914235521432"></p></blockquote><h3 id="重绘和回流-重排" tabindex="-1"><a class="header-anchor" href="#重绘和回流-重排"><span>重绘和回流(重排)</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 重绘 和 回流(重排)</span>
<span class="token comment">### 1. 重绘(repaint)</span>
重绘<span class="token punctuation">(</span>repaint<span class="token punctuation">)</span>：不会影响页面布局的操作，重新绘制到屏幕上的过程称为重绘。
   - 如改变某个元素的背景色、文字颜色、边框颜色等不影响它周围或内部布局的属性时，即元素的几何尺寸没有变。
   - DOM改动
   - CSS改动


<span class="token comment">### 2. 回流/重排(reflow)</span>
回流<span class="token punctuation">(</span>reflow<span class="token punctuation">)</span>：布局的改变<span class="token punctuation">(</span>某个部位改变<span class="token punctuation">)</span>导致需要倒回去重新渲染，这个回退的过程叫回流
   - 增加、删除、修改DOM节点时，会导致 Reflow 或 Repaint。
   - 移动DOM的位置，或是加个动画时。
   - 修改CSS样式时（宽高、display 为none等，都是通过css样式来修改的）
   - 当用户Resize窗口时（移动端没有这个问题），或是滚动时，有可能会触发（具体要看浏览器的规则）
   - 修改网页的默认字体时。
注意：回流必将引起重绘，重绘不一定会引起回流


<span class="token comment">### 引起重排的原因</span>
<span class="token number">1</span>. 添加或者删除可见的DOM元素；
<span class="token number">2</span>. 元素位置、尺寸、内容改变；
<span class="token number">3</span>. 浏览器页面初始化；
<span class="token number">4</span>. 浏览器窗尺寸改变，重排一定引起重绘，重绘不一定引起重排。


<span class="token comment">### 减少重绘和重排的方法</span>
<span class="token number">1</span>. 不在布局信息改变时做 DOM 查询。
<span class="token number">2</span>. 使用 <span class="token variable"><span class="token variable">\`</span>cssText<span class="token variable">\`</span></span> 或者 <span class="token variable"><span class="token variable">\`</span>className<span class="token variable">\`</span></span> 一次性改变属性。
<span class="token number">3</span>. 使用 <span class="token variable"><span class="token variable">\`</span>fragment<span class="token variable">\`</span></span>。
<span class="token number">4</span>. 对于多次重排的元素，如动画，使用绝对定位脱离文档流，让他的改变不影响到其他元素。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h2 id="脚本标签-script" tabindex="-1"><a class="header-anchor" href="#脚本标签-script"><span>脚本标签 script</span></a></h2><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 脚本 script</span>
		<span class="token variable"><span class="token variable">\`</span><span class="token operator">&lt;</span>script <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span> <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span> async<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span><span class="token variable">\`</span></span>
   // async:异步		defer：
   // 注意： 该属性指的是浏览器将外部js文件下载完成后，立马执行。

当浏览器看到普通脚本标签声明时，它执行以下步骤：
    - 暂停 HTML 文档解析器
    - 创建新请求以下载脚本
    - 在脚本完全下载后立即执行脚本
    - 执行结束后，继续解析 HTML 文档


<span class="token comment">### async 和 defer</span>
async 与 defer 的作用是让浏览器知道脚本可以与文档解析器过程并行下载，从而不阻塞页面的渲染。
async 与 defer 的区别是脚本会在不同的时刻执行。

<span class="token number">1</span>. async 异步执行
    下载 async 脚本后，浏览器将暂停文档解析器，执行脚本并继续解析文档。
        <span class="token number">1</span>. 解析文档
        <span class="token number">2</span>. 下载脚本
        <span class="token number">3</span>. 暂停解析
        <span class="token number">4</span>. 执行脚本
        <span class="token number">5</span>. 恢复解析
     async 对于应用脚本的用处不大，因为它完全不考虑依赖（哪怕是最低级的顺序执行），
     但它对于那些可以不依赖任何脚本或不被任何脚本依赖的脚本来说非常适合。

<span class="token number">2</span>. defer 延时执行
    只有当解析器完成其工作时，才会执行 defer 脚本。
        <span class="token number">1</span>. 解析脚本
        <span class="token number">2</span>. 下载脚本
        <span class="token number">3</span>. 执行脚本
    注意：这个过程中，文档是不会停止解析的。


<span class="token comment">### aync 与 defer 的区别</span>
async 脚本在完全下载后立即执行，加载和渲染后续文档元素的过程将和 JS 脚本的加载与执行并行进行（异步），因此它们的执行顺序可能与页面中显示的顺序不同（即不管声明顺序如何，只要它加载完成该脚本就会立刻执行）。
defer 脚本保证执行顺序。它是等到页面渲染完毕，所有脚本下载完成，在 <span class="token variable"><span class="token variable">\`</span>DOMContentLoaded<span class="token variable">\`</span></span> 事件前按照脚本在文档中的顺序执行。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="domcontentloaded-事件" tabindex="-1"><a class="header-anchor" href="#domcontentloaded-事件"><span>DOMContentLoaded 事件</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## DOMContentLoaded 事件</span>
当初始HTML文档已完全加载和解析时，将触发DOMContentLoaded事件，而不需要等待样式表，图像和子框架页面加载（事件可以用来检测HTML页面是否完全加载完毕<span class="token punctuation">(</span>fully-loaded<span class="token punctuation">)</span>）。


<span class="token comment">### DOMContentLoaded 执行时机</span>
<span class="token comment">#### 1. 普通脚本/sync（等待脚本执行完后再执行DOMContentLoaded）</span>
	HTML加载解析 -<span class="token operator">&gt;</span> 遇到普通脚本 -<span class="token operator">&gt;</span> 加载<span class="token operator">&amp;</span>执行脚本 -<span class="token operator">&gt;</span> 继续HTML加载解析 -<span class="token operator">&gt;</span> HTML解析完毕 -<span class="token operator">&gt;</span> DOMContentLoaded事件


<span class="token comment">#### 2. 异步加载脚本/async（衡量HTML加载解析的速度来执行DOMContentLoaded）</span>
	HTML加载解析 -<span class="token operator">&gt;</span> 遇到async脚本 -<span class="token operator">&gt;</span> <span class="token punctuation">(</span>HTML<span class="token operator">&amp;</span>async脚本<span class="token punctuation">)</span>并行加载解析 -<span class="token operator">&gt;</span>
		- 若HTML解析完后async脚本也已加载完毕 -<span class="token operator">&gt;</span> 停止HTML解析 -<span class="token operator">&gt;</span> 执行async脚本 -<span class="token operator">&gt;</span> 继续HTML加载解析 -<span class="token operator">&gt;</span> HTML解析完毕 -<span class="token operator">&gt;</span> DOMContentLoaded事件
		- 若HTML解析完后async脚本还未加载完成 -<span class="token operator">&gt;</span> DOMContentLoaded事件


<span class="token comment">#### 3. 延时加载脚本/defer（等待脚本执行完后再执行DOMContentLoaded）</span>
	HTML加载解析<span class="token operator">&amp;</span>defer脚本加载 
			- 若HTML解析完后defer脚本也已加载完毕 -<span class="token operator">&gt;</span> 执行defer脚本 -<span class="token operator">&gt;</span> DOMContentLoaded事件
			- 若HTML解析完后async脚本还未加载完成 -<span class="token operator">&gt;</span> defer脚本加载完毕 -<span class="token operator">&gt;</span> 执行defer脚本 -<span class="token operator">&gt;</span> DOMContentLoaded事件
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+d+'" alt="image-20230329111340256"></p><h4 id="对于不同声明的脚本-domcontentloaded-的触发时机" tabindex="-1"><a class="header-anchor" href="#对于不同声明的脚本-domcontentloaded-的触发时机"><span>对于不同声明的脚本，DOMContentLoaded 的触发时机</span></a></h4><h5 id="sync-普通-js" tabindex="-1"><a class="header-anchor" href="#sync-普通-js"><span>sync / 普通 js</span></a></h5><ul><li>文档解析的过程中，如果遇到 script 脚本，就会停止页面的解析进行下载，当脚本都执行完毕后，才会继续解析页面。</li></ul><p><img src="'+k+'" alt="image-20230329112327704"></p><h5 id="async-异步加载脚本" tabindex="-1"><a class="header-anchor" href="#async-异步加载脚本"><span>async / 异步加载脚本</span></a></h5><ul><li>async 脚本会在加载完毕后执行。</li><li>async 脚本的加载不计入 <code>DOMContentLoaded</code> 事件统计，就存在下面两种情况会发生。</li></ul><ol><li><p>HTML 还没有被解析完的时候，async 脚本已经加载完毕，那么 HTML 就会停止解析，去执行脚本，脚本执行完毕后触发 <code>DOMContentLoaded</code> 事件。</p><p><img src="'+v+'" alt="image-20230329112729627"></p></li><li><p>HTML 解析完之后，async 脚本还未加载完成，那么在HTML解析完毕后就触发 <code>DOMContentLoaded</code> 事件。</p><p><img src="'+m+'" alt="image-20230329112749177"></p></li></ol><h5 id="defer-延时加载脚本" tabindex="-1"><a class="header-anchor" href="#defer-延时加载脚本"><span>defer / 延时加载脚本</span></a></h5><ul><li>文档解析时，遇到设置了 defer 的脚本，就会在后台进行下载，但是并不会阻止文档的渲染，当页面解析和渲染完毕后，会等到所有的 defer 脚本加载完毕并按照顺序执行完毕才会触发 <code>DOMContentLoaded</code> 事件。此时就存在两种情况会发生：</li></ul><ol><li><p>HTML还没被解析完的时候，defer 脚本已经加载完毕，此时会等待 HTML 解析完成后执行脚本，脚本执行完毕后触发 <code>DOMContentLoaded</code> 事件。</p><p><img src="'+b+'" alt="image-20230329113352649"></p></li><li><p>HTML 解析完之后，defer 脚本才加载完，此时会先等待 defer 脚本执行完毕后，才会触发 <code>DOMContentLoaded</code> 事件。</p><p><img src="'+g+`" alt="image-20230329113418206"></p></li></ol></blockquote><h3 id="domcontentloaded和load的区别" tabindex="-1"><a class="header-anchor" href="#domcontentloaded和load的区别"><span>DOMContentLoaded和load的区别</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## DOMContentLoaded 和 load 的区别</span>
DOMContentLoaded：在 interactive 触发
	当初始的 HTML 文档被完全加载和解析完成之后，DOMContentLoaded 事件被触发，而无需等待样式表、图像和子框架的完成加载。

load：在 complete 触发
	当一个资源及其依赖资源已完成加载时，将触发load事件。


<span class="token comment">### document.readyState</span>
document.readyState 属性描述了文档的加载状态。一个文档的 readyState 可以是以下值之一：
	- loading：加载，此时 document 仍在加载
	- interactive：互动，此时文档已经完成加载，文档已被解析，但是诸如图像、样式表和iframe之类的子资源仍在加载。
	- complete：完成，此时 T 文档和所有子资源已完成加载。状态表示 load 事件即将被触发。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+h+`" alt="20190128102028682"></p></blockquote><h2 id="dom" tabindex="-1"><a class="header-anchor" href="#dom"><span>DOM</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## DOM</span>
- DOM 为文档提供了结构化表示，并定义了如何通过脚本来访问文档结构。
- DOM 的目的是为了能让 js 操作 html 元素而制定的一个规范。
- DOM 是由节点组成的；所有的节点本质上都是 Object。
- DOM对象与标签的区别
    - 元素标签<span class="token punctuation">(</span>位于文档<span class="token punctuation">)</span>对应的元素节点<span class="token punctuation">(</span>位于Dom节点书上<span class="token punctuation">)</span>。
    - 区别是 DOM 里面的元素节点是个对象，拥有属性和方法；而元素标签仅仅是标签而已。
  
  
<span class="token comment">### DOM作用</span>
  - 找对象（元素节点）
  - 设置元素的属性值
  - 设置元素的样式
  - 动态创建和删除元素
  - 事件的触发响应：事件源、事件、事件的驱动程序

- 节点元素：父（parent）、子（child）和同胞（sibling）
- 元素的属性（包括对应标签的属性）
    - 非表单元素的属性：id、src、title、href、alt
    - 表单元素的属性：name、value、type、disabled、checked、selected
    - 超链接--<span class="token operator">&gt;</span>取消默认行为的执行：<span class="token variable"><span class="token variable">\`</span><span class="token builtin class-name">return</span> <span class="token boolean">false</span><span class="token variable">\`</span></span>


<span class="token comment">### DOM节点属性</span>
<span class="token number">1</span>. nodeName	--<span class="token operator">&gt;</span> nodeName 属性规定节点的名称，仅只读
    - 文档节点（文档）：整个 HTML 文档就是一个文档节点；nodeName 始终是 <span class="token variable"><span class="token variable">\`</span><span class="token comment">#document</span><span class="token variable">\`</span></span>
    - 元素节点（标签）：HTML标签；nodeName 与标签名相同
    - 属性节点（属性）：元素的属性；nodeName 与属性名相同
    - 文本节点（文本）：HTML标签中的文本内容<span class="token punctuation">(</span>包括标签之间的空格、换行<span class="token punctuation">)</span>；nodeName始终是 <span class="token variable"><span class="token variable">\`</span><span class="token comment">#text</span><span class="token variable">\`</span></span>
  
<span class="token number">2</span>. nodeValue 	--<span class="token operator">&gt;</span>  nodeValue 属性规定节点的值
    - 元素节点的 nodeValue 是 undefined 或 null
    - 文本节点的 nodeValue 是文本本身
    - 属性节点的 nodeValue 是属性值

<span class="token number">3</span>. NodeType
    - 元素：1
    - 属性：2
    - 文本：3
    - 注释：8
    - 文档：9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+f+`" alt="JS_DOM节点关系表"></p><h3 id="domstring" tabindex="-1"><a class="header-anchor" href="#domstring"><span>DOMString</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## DOMString</span>
DOMString 是一种字符串类型。它是由 <span class="token number">16</span> 位无符号证书序列组成，每个整数代表一个 UTF-16 代码单元。

每个代码单元都是一个 <span class="token number">16</span> 位的数值，通常代表一个字符，但有时需要两个代码单元来表示一个字符（对于 Unicode 辅助平面上的字符）。当文档或 Web API 规范提到 DOMString 时，它指的就是这样的字符串。

在 Web API 中，许多属性和方法返回或接受 DOMString 类型的参数。由于 JavaScript 的字符串是以 UTF-16 编码的，所以 DOMString 可以被当作普通的 JavaScript 字符串来使用，没有特殊的区别或限制。这意味着，在 JavaScript 中处理字符串时，实际是在处理 DOMString。

在 Web API 中，DOMString 通常用于：
	- DOM 元素属性，如 id、className、value 等。
	- 传递给或从方法返回的字符串值，如 document.querySelector<span class="token punctuation">(</span><span class="token punctuation">)</span> 或 Node.textContent。
	- 在构造函数中当做参数，如 new Text<span class="token punctuation">(</span><span class="token string">&#39;Hello, world!&#39;</span><span class="token punctuation">)</span>，其中 <span class="token string">&#39;Hello, world!&#39;</span> 就是一个 DOMString。
	- 表示 URL、选择器字符串或其他需要以文本形式表示的数据。
注意：尽管 DOMString 在概念上等同于 JavaScript 字符串，但在一些特殊情境下，DOMString 可能会被指定为 null 或 undefined，这通常表明字符串值是不存在的。此外，有些 API 可能会将 DOMString 限定为必须符合某些模式或格式<span class="token punctuation">(</span>可能不接收 null 值<span class="token punctuation">)</span>，比如必须是合法的 CSS 选择器或有效的 URL。在这些情况下，需要确保提供的字符串满足这些要求。

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/** 获取 DOM 元素属性值 */</span>
<span class="token keyword">let</span> elementId <span class="token operator">=</span> element<span class="token punctuation">.</span>id<span class="token punctuation">;</span>  <span class="token comment">// \`elementId\` is a DOMString</span>
<span class="token keyword">let</span> elementClasses <span class="token operator">=</span> element<span class="token punctuation">.</span>className<span class="token punctuation">;</span>  <span class="token comment">// \`elementClasses\` is a DOMString</span>


<span class="token doc-comment comment">/** 设置 DOM 元素属性值 */</span>
element<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">&#39;new-id&#39;</span><span class="token punctuation">;</span>  <span class="token comment">// Setting a DOMString</span>
element<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&#39;new-class&#39;</span><span class="token punctuation">;</span> <span class="token comment">// className is a DOMString that you can set</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dom方法" tabindex="-1"><a class="header-anchor" href="#dom方法"><span>DOM方法</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">### DOM 方法</span>
<span class="token number">1</span>. get<span class="token punctuation">(</span>获取<span class="token punctuation">)</span>
<span class="token number">2</span>. set<span class="token punctuation">(</span>设置<span class="token punctuation">)</span>
<span class="token number">3</span>. remove<span class="token punctuation">(</span>移除<span class="token punctuation">)</span>
<span class="token number">4</span>. create<span class="token punctuation">(</span>创建<span class="token punctuation">)</span>
<span class="token number">5</span>. insert<span class="token punctuation">(</span>插入<span class="token punctuation">)</span>
<span class="token number">6</span>. replace<span class="token punctuation">(</span>替代<span class="token punctuation">)</span>
<span class="token number">7</span>. append<span class="token punctuation">(</span>添加<span class="token punctuation">)</span>


- getElementById<span class="token punctuation">(</span>id<span class="token punctuation">)</span> - 获取带有指定 <span class="token function">id</span> 的节点（元素）
- appendChild<span class="token punctuation">(</span>node<span class="token punctuation">)</span> - 插入新的子节点（元素）
- removeChild<span class="token punctuation">(</span>node<span class="token punctuation">)</span> - 删除子节点（元素）
- createAttribute<span class="token punctuation">(</span><span class="token punctuation">)</span> - 创建属性节点
- 要复制的节点.cloneNode<span class="token punctuation">(</span>true<span class="token punctuation">)</span>--复制节点
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dom属性" tabindex="-1"><a class="header-anchor" href="#dom属性"><span>DOM属性</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">### DOM 属性</span>
- innerHTML - 节点（元素）的文本值
- parentNode - 节点（元素）的父节点
- childNodes - 节点（元素）的子节点
- attributes - 节点（元素）的属性节点

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="自定义属性" tabindex="-1"><a class="header-anchor" href="#自定义属性"><span>自定义属性</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">### 自定义属性</span>
DOM 中的自定义属性不能直接访问，但可以通过以下方法来进行操作：
	- 获取标签对应的属性：<span class="token variable"><span class="token variable">\`</span>getAttribute<span class="token punctuation">(</span><span class="token string">&#39;属性名&#39;</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>（注意：属性可以是自定义，也可以是 DOM 自身已有的）
	- 设置标签属性的值：<span class="token variable"><span class="token variable">\`</span>setAttribute<span class="token punctuation">(</span><span class="token string">&#39;属性名&#39;</span>, <span class="token string">&#39;属性值&#39;</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>
	- 移除标签属性值：<span class="token variable"><span class="token variable">\`</span>removeAttribute<span class="token punctuation">(</span><span class="token string">&#39;属性名&#39;</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> ele <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement

<span class="token doc-comment comment">/**
 * 获取 data-* 属性的值
 */</span>
<span class="token keyword">const</span> getMessage1 <span class="token operator">=</span> ele<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;data-message&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// or</span>
<span class="token keyword">const</span> getMessage2 <span class="token operator">=</span> ele<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>message

<span class="token doc-comment comment">/**
 * 设置 da-* 属性的值
 */</span>
ele<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;data-message&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Hi, willy&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// or</span>
ele<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&#39;Hi, willy&#39;</span>


<span class="token doc-comment comment">/**
 * 删除 data-* 属性
 */</span>
ele<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;data-message&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// or</span>
<span class="token keyword">delete</span> ele<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>message
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dom访问" tabindex="-1"><a class="header-anchor" href="#dom访问"><span>DOM访问</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">### DOM 访问</span>
- 通过Id获取单个标签：document.getElementById，返回Object类型
- 通过类名获取标签：document.getElementByClassName，返回一个数组
- 通过标签名获取标签：document.getElementsByTagName，返回一个数组
- H5中query查询Selector选择器：querySelctor<span class="token punctuation">(</span><span class="token punctuation">)</span>
- 查询所有选择器：querySelctorAll<span class="token punctuation">(</span>标签名/类名/id名等等<span class="token punctuation">)</span>

注意：因为id是单数，所以不用s，name等可以多个，为复数，所以需要s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// 元素的节点访问</span>
节点<span class="token punctuation">.</span>parentNode						：获取父元素

节点<span class="token punctuation">.</span>previousSibling			 ：上一个兄弟节点		
节点<span class="token punctuation">.</span>nextSibling					：下一个兄弟节点
节点<span class="token punctuation">.</span>previousElementSibling：上一个兄弟元素（处理兼容： 节点<span class="token punctuation">.</span>previousElementSibling <span class="token operator">||</span> 节点）
节点<span class="token punctuation">.</span>nextElementSibling		：下一个兄弟元素（处理兼容问题： 节点<span class="token punctuation">.</span>nextElementSibling <span class="token operator">||</span> 节点）

节点<span class="token punctuation">.</span>firstChild						：获取第一个子节点		
节点<span class="token punctuation">.</span>lastChild						：最后的子节点
节点<span class="token punctuation">.</span>firstElementChild		：获取第一个子元素（处理兼容问题：节点<span class="token punctuation">.</span>firstElementChild <span class="token operator">||</span> 节点）
节点<span class="token punctuation">.</span>lastElementChild			：最后的子元素		（处理兼容问题：节点<span class="token punctuation">.</span>lastElementChild <span class="token operator">||</span> 节点）

节点自己<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>children<span class="token punctuation">[</span>index<span class="token punctuation">]</span> ：获取随意的兄弟节点
节点<span class="token punctuation">.</span>childNodes						：获取所有子节点
节点<span class="token punctuation">.</span>children							：获取所有子元素

document<span class="token punctuation">.</span>body							<span class="token operator">:</span>获取body节点
document<span class="token punctuation">.</span>documentElement	<span class="token operator">:</span>获取html节点
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="匹配对应父元素的标签" tabindex="-1"><a class="header-anchor" href="#匹配对应父元素的标签"><span>匹配对应父元素的标签</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@description</span> 查找元素的所有祖先，直到元素与指定的选择器匹配为止
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>HTMLElement<span class="token punctuation">}</span></span> <span class="token parameter">el</span> - 所要查找的元素
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>string<span class="token punctuation">}</span></span> <span class="token parameter">selector</span> - 所要查找的父元素的标签名称
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">getParentsUntil</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> selector</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> parents <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> _el <span class="token operator">=</span> el<span class="token punctuation">.</span>parentNode

  <span class="token comment">// 循环向上移动元素的祖先树</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>_el <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> _el<span class="token punctuation">.</span>matches <span class="token operator">===</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 将每个新祖先添加到数组的开头</span>
    parents<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>_el<span class="token punctuation">)</span>
    <span class="token comment">// 检查当前元素是否与指定的选择器匹配</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_el<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> parents
    <span class="token keyword">else</span> _el <span class="token operator">=</span> _el<span class="token punctuation">.</span>parentNode
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token function">getParentsUntil</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#home-link&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;header&#39;</span><span class="token punctuation">)</span> <span class="token comment">// [header, nav, ul, li]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dom修改-操作样式" tabindex="-1"><a class="header-anchor" href="#dom修改-操作样式"><span>DOM修改（操作样式）</span></a></h3><blockquote><p>**操作样式：**设置类样式class 、设置行内样式style</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> list <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;li&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;lightgray&quot;</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&#39;list&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span><span class="token string">&#39;src&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> list<span class="token punctuation">[</span><span class="token string">&#39;className&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>动态创建元素</strong>（innerHTML、document.write、inerText）:动态创建元素优点--&gt;提高网页性能，降低流量使用</p><p><strong>注意：通过<code>attribute</code>和设置<code>style</code>只能通过获取id标签来更改</strong></p><ul><li><p><strong>innerHTML 和 innerText 区别</strong></p><ul><li>innerHTML 返回的是标签内的html内容，包含里层的html标签</li><li>inerText 返回的是标签的文本值，不包含html标签</li><li>innerHTML 和 innerText，如果两个都写，下面的内容会把上面的内容覆盖</li></ul></li><li><p><strong>document.write()</strong> //比如弹出新框的在线客服</p><ul><li>当页面加载时，会产生输出流，这个输出流在页面加载完毕时关闭</li><li>如果输出流关闭后执行document.write()，它会开启一个新的输出流，页面会被覆盖</li><li>使用建议：使用document.write只可以在页面加载中，可以使用在弹出新窗口时</li></ul></li><li><p><strong>innerHTML</strong></p><ul><li>在设置时会覆盖原来的内容，但是可以通过+=去解决</li></ul></li><li><p><strong>inerHTML 和 document.write 区别</strong></p><ul><li>innerHTML 是将内容写入某个DOM节点，不会导致页面全部重绘</li><li>document.write 是直接将内容写入页面的内容流，会导致页面全部重绘</li></ul></li><li><p><code>document.createElement()</code></p></li><li><p>动态操作表格</p><ul><li>rows (只读，table和textarea能用)</li><li>insertRow(index) (只有table能调用)</li><li>deleteRow(index) (只有table能调用)</li><li>cells (只读，table和textarea能用)</li><li>insertCell(index) (只有tr能调用)</li><li>deleteCell(index) (只有tr能调用)</li></ul></li></ul></blockquote><h4 id="获取和设置css样式" tabindex="-1"><a class="header-anchor" href="#获取和设置css样式"><span>获取和设置CSS样式</span></a></h4><blockquote></blockquote><h4 id="提取非行间样式" tabindex="-1"><a class="header-anchor" href="#提取非行间样式"><span>提取非行间样式</span></a></h4><blockquote><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
     <span class="token keyword">let</span> style <span class="token operator">=</span> <span class="token function">getAttr</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> <span class="token string">&#39;width&#39;</span><span class="token punctuation">)</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取class或id 标签的指定样式</span>
<span class="token keyword">function</span> <span class="token function">getAttr</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> attr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> style<span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>currentStyle<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//当有这个属性的时候currentStyle(即在IE中时)</span>
       style <span class="token operator">=</span> obj<span class="token punctuation">.</span>currentStyle<span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//兼容IE</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">else</span> <span class="token punctuation">{</span>
       style <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//主流浏览器</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">return</span> style<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="替换内容问题" tabindex="-1"><a class="header-anchor" href="#替换内容问题"><span>替换内容问题</span></a></h4><blockquote><ul><li>变量名.replace(“被替换内容”,“替换内容”);</li><li>替换类名：<code>变量名.className = 变量名.className.replace(“被替者”,“替换者”);</code> //只是替换了replace的内容，class中定义的其他类名还是存在的，</li><li>比如class=&quot;aa bb cc&quot;，当你relpace(&quot;aa&quot;,&quot;dd&quot;)，其他两个bb,cc的类名仍然存在</li></ul></blockquote><h4 id="定义选择到框内的状态" tabindex="-1"><a class="header-anchor" href="#定义选择到框内的状态"><span>定义选择到框内的状态</span></a></h4><blockquote><ul><li>形如：input[type=text] 选择input标签中的文本类型的</li><li>Checkbox的checked 为选中状态</li><li>取反则是为非：! 形如：获取的变量.checked=!获取的变量.checked</li></ul></blockquote><h4 id="切换类" tabindex="-1"><a class="header-anchor" href="#切换类"><span>切换类</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">### 切换类</span>
classList.toggle<span class="token punctuation">(</span><span class="token punctuation">)</span> 是 JavaScript 中用于切换 HTML 元素类名的方法。
使用该方法时，元素存在该类名就会移除，没有则添加该类。

const toggleClass <span class="token operator">=</span> <span class="token punctuation">(</span>el, className<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> el.classList.toggle<span class="token punctuation">(</span>className<span class="token punctuation">)</span>
toggleClass<span class="token punctuation">(</span>document.querySelector<span class="token punctuation">(</span><span class="token string">&#39;p.hdfp&#39;</span><span class="token punctuation">)</span>, <span class="token string">&#39;hdfp&#39;</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zh-cn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
      <span class="token selector">.btn</span> <span class="token punctuation">{</span> <span class="token property">background-color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span> <span class="token punctuation">}</span> 
      <span class="token selector">.btn.active</span> <span class="token punctuation">{</span> <span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBtn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Toggle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
      btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="从-dom-元素中移除所有子元素" tabindex="-1"><a class="header-anchor" href="#从-dom-元素中移除所有子元素"><span>从 DOM 元素中移除所有子元素</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 从 Dom 元素中移除所有子元素</span>
给定 DOM 中的一个项目列表，使用 <span class="token variable"><span class="token variable">\`</span>querySelector<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span> 获取它，如下所示：
	const item <span class="token operator">=</span> document.querySelector<span class="token punctuation">(</span><span class="token string">&#39;.ele&#39;</span><span class="token punctuation">)</span>

<span class="token number">1</span>. 最快的解决方案是：
	item.innerHTML <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>

<span class="token number">2</span>. 另一个解决方案是，创建一个循环，检查 <span class="token variable"><span class="token variable">\`</span>firstChild<span class="token variable">\`</span></span> 属性是否存在，然后将其删除：
	<span class="token keyword">while</span> <span class="token punctuation">(</span>item.firstChild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	item.removeChild<span class="token punctuation">(</span>item.firstChild<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
当所有子元素都被移除时，循环结束。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dom事件" tabindex="-1"><a class="header-anchor" href="#dom事件"><span>DOM事件</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## DOM 事件</span>
<span class="token number">1</span>. 鼠标拖拽事件
    - <span class="token variable"><span class="token variable">\`</span>onmousedown<span class="token variable">\`</span></span>：当鼠标在被拖拽元素上按下时，开始拖拽；
    - <span class="token variable"><span class="token variable">\`</span>onmousemove<span class="token variable">\`</span></span>：当鼠标移动时被拖拽元素跟随鼠标移动；
    - <span class="token variable"><span class="token variable">\`</span>onmouseup<span class="token variable">\`</span></span>：当鼠标松开时，被拖拽元素固定在当前位置。
    - <span class="token variable"><span class="token variable">\`</span>oncontextmenu<span class="token variable">\`</span></span>：鼠标右键点击事件。

<span class="token number">2</span>. 鼠标移动事件
    - <span class="token variable"><span class="token variable">\`</span>onmousewheel<span class="token variable">\`</span></span>：鼠标滚轮滚动的事件，会在滚轮滚动时触发。但火狐不支持该属性
    - <span class="token variable"><span class="token variable">\`</span>DOMMouseScroll<span class="token variable">\`</span></span>：在火狐中使用该方法来绑定滚动事件。该事件需要通过addEventListener<span class="token punctuation">(</span><span class="token punctuation">)</span>函数来绑定。

<span class="token number">3</span>. 键盘事件
    - <span class="token variable"><span class="token variable">\`</span>onkeydown<span class="token variable">\`</span></span>：按键被按下时触发
    - <span class="token variable"><span class="token variable">\`</span>onkeyup<span class="token variable">\`</span></span>：按键被松开时触发
    - 注意：若持续按着某键不放，该<span class="token variable"><span class="token variable">\`</span>onkeydown<span class="token variable">\`</span></span>事件会持续触发。此时松开键盘，<span class="token variable"><span class="token variable">\`</span>onkeyup<span class="token variable">\`</span></span>事件会执行一次。


- 其他事件
    - onclick：点击事件
    - onfocus：获取聚焦事件 
    - onblur：失去焦点事件
    - onload用户进入页面
    - onunload用户离开页面
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="动态创建列表" tabindex="-1"><a class="header-anchor" href="#动态创建列表"><span>动态创建列表</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// 动态创建列表</span>
<span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;box&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// 创建 ul，在内存中创建一个 DOM 对象</span>
<span class="token keyword">const</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;ul&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// 把 ul 对象添加到 box 中</span>
box<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>ul<span class="token punctuation">)</span>

<span class="token comment">// 遍历数组，生成 li</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建 li，在内存中创建一个孤立的 DOM 元素</span>
  <span class="token keyword">const</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>
  <span class="token comment">// 把元素添加到 ul 中（添加到 DOM 树上）</span>
  ul<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>
  <span class="token comment">// 设置 li 中的内容</span>
  <span class="token function">setInnerText</span><span class="token punctuation">(</span>li<span class="token punctuation">,</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>key<span class="token punctuation">)</span>
  
  li<span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">&#39;lightgray&#39;</span>
  <span class="token punctuation">}</span>
  li<span class="token punctuation">.</span><span class="token function-variable function">onmouseout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="事件" tabindex="-1"><a class="header-anchor" href="#事件"><span>事件</span></a></h4><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 事件</span>
事件三要素：<span class="token string">&#39;事件源(触发的事件的元素标签) -&gt; 事件名称(click) -&gt; 事件处理程序(function：对样式和html的操作)&#39;</span>。

onload <span class="token operator">&amp;&amp;</span> onunload
- 页面加载完毕时执行<span class="token punctuation">(</span>DOM元素加载完毕，当外部文件加载完毕<span class="token punctuation">)</span>：<span class="token variable"><span class="token variable">\`</span>onload <span class="token operator">=</span> <span class="token function-name function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token variable">\`</span></span>
- 当页面关闭时执行：<span class="token variable"><span class="token variable">\`</span>onunload <span class="token operator">=</span> <span class="token function-name function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token variable">\`</span></span>

mouseover <span class="token operator">&amp;&amp;</span> mouseenter
- onmouseover/onmouseout：鼠标经过时自身触发事件，经过其子元素时也触发该事件。
- onmouseenter/onmouseleave：鼠标经过时自身触发事件，经过其子元素时不触发该事件。


<span class="token comment">### 事件优先级</span>
- <span class="token variable"><span class="token variable">\`</span> event.stopImmediatePropagation<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">\`</span></span>
- <span class="token variable"><span class="token variable">\`</span>addEventListener<span class="token variable">\`</span></span>给某按钮同时注册了事件A、事件B。此时，如果单击按钮，就会依次执行事件A和事件B。
		现在要求：单击按钮时，只执行事件A，不执行事件B。该怎么做呢？
		此时可以在事件A的响应函数中加入 <span class="token variable"><span class="token variable">\`</span>stopImmediatePropagation<span class="token variable">\`</span></span> 方法


<span class="token comment">### addEventListener</span>
- <span class="token variable"><span class="token variable">\`</span>element.addEventListener<span class="token punctuation">(</span><span class="token string">&#39;事件名&#39;</span>, callback, target<span class="token punctuation">)</span><span class="token variable">\`</span></span>
		- 参数1：事件名的字符串（注意：没有 on 前缀）
		- 参数2：回调函数（当事件触发时，该函数会被执行）
		- 参数3：true表示捕获阶段触发，false表示冒泡阶段触发（不写默认为false）
- 一个元素的一个事件，可以绑定多个响应函数，不存在响应函数被覆盖的情况。
		执行顺序是：事件被触发时，响应函数会按照函数的绑定顺序执行。
- addEventListener<span class="token punctuation">(</span><span class="token punctuation">)</span> 中的 this 是绑定事件的对象。
- addEventListener<span class="token punctuation">(</span><span class="token punctuation">)</span> 不支持 IE8 及以下的浏览器，在 IE8 中可以使用 attachEvent 来绑定事件。



<span class="token comment">### attachEvent</span>
- <span class="token variable"><span class="token variable">\`</span>element.attachEvent<span class="token punctuation">(</span><span class="token string">&#39;事件名&#39;</span>, callback<span class="token punctuation">)</span><span class="token variable">\`</span></span>
		- 参数1：事件名的字符串（注意：有 on 前缀）
		- 参数2：回调函数（当事件触发时，该函数会被执行）
- 一个元素的一个事件，可以绑定多个响应函数。不存在响应函数被覆盖的情况。
		注意：执行顺序是，后绑定的先执行。
- attachEvent<span class="token punctuation">(</span><span class="token punctuation">)</span> 中的 this，是 window
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="dom元素事件执行顺序" tabindex="-1"><a class="header-anchor" href="#dom元素事件执行顺序"><span>DOM元素事件执行顺序</span></a></h4><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## DOM 元素事件执行顺序</span>
HTML 页面上 DOM 元素的事件执行顺序一般有三个阶段：
	<span class="token number">1</span>. 事件捕获
	<span class="token number">2</span>. 事件触发
	<span class="token number">3</span>. 事件冒泡

DOM 标准事件流触发的先后顺序为：先捕获再冒泡，即当触发 DOM 事件时，会进行事件捕获，捕获事件源之后通过事件传播进行事件冒泡。
而在 <span class="token string">&#39;浏览器中默认执行的是事件冒泡&#39;</span>，即我们一般 <span class="token string">&#39;观察不到事件捕获阶段&#39;</span>，比如 onclick 等事件。
如果想要观察到事件的捕获阶段，那需要借助 addEventListener 接口来实现。


<span class="token comment">### addEventListener</span>
- <span class="token variable"><span class="token variable">\`</span>element.addEventListener<span class="token punctuation">(</span>type, listener, useCapture<span class="token punctuation">)</span><span class="token variable">\`</span></span>
		- type：事件类型（事件名称，注意：没有 on 前缀）
		- listener：事件触发实际执行的匿名函数（当事件触发时，该函数会被执行）
		- useCapture：是否在事件捕获阶段执行（不写默认为false）

<span class="token comment">#### 关于 listener 中的 this 和 target</span>
- 当一个 EventListener 在 EventTarget 正在处理事件时被注册到 EventTarget 上，它不会被立即触发，但可能在事件流后面的事件触发阶段被触发，例如可能在捕获阶段添加，然后在冒泡阶段被触发。
- 通常来说 this 的值是触发事件的元素的引用，当使用 addEventListener<span class="token punctuation">(</span><span class="token punctuation">)</span> 为一个元素注册事件时，句柄里的 this 值是该元素的引用。其与传递给句柄的 event 参数的 currentTarget 属性的值一致。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 点我 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;parent&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">冒泡: parent 事件触发, this指向:</span><span class="token template-punctuation string">\`</span></span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">&#39;, 触发的id为:&#39;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;child&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">冒泡: child 事件触发，this指向:</span><span class="token template-punctuation string">\`</span></span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">&#39;, 触发的id为:&#39;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;parent&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">捕获: parent 事件触发,this指向:</span><span class="token template-punctuation string">\`</span></span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">&#39;, 触发的id为:&#39;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;child&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">捕获: child 事件触发,this指向:</span><span class="token template-punctuation string">\`</span></span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">&#39;, 触发的id为:&#39;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--
  输入的结果：
    1. 捕获: parent 事件触发,this指向:parent, 触发的id为:child
    2. 捕获: child 事件触发,this指向:child, 触发的id为:child
    3. 冒泡: child 事件触发，this指向:child, 触发的id为:child
    4. 冒泡: parent 事件触发, this指向:parent, 触发的id为:child
--&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+y+`" alt="image-20230330174649406"></p></blockquote><h4 id="兼容性事件封装" tabindex="-1"><a class="header-anchor" href="#兼容性事件封装"><span>兼容性事件封装</span></a></h4><blockquote><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// 浏览器兼容性写法</span>
<span class="token keyword">var</span> EventUtil <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">addHandler</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      element<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">&quot;on&quot;</span> <span class="token operator">+</span> type<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      element<span class="token punctuation">[</span><span class="token string">&quot;on&quot;</span> <span class="token operator">+</span> type<span class="token punctuation">]</span> <span class="token operator">=</span> handler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 当浏览器窗口被调整到一个新的高度或宽度时，就会触发resize事件</span>
EventUtil<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Resized&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>注意：该事件会触发两次，比如浏览器全屏显示，如果使用screen.availHeight重布局屏幕会闪两次。因为resize方法会进2次.而且每次screen.availHeight都不一样（解决方法：设置延迟）</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onresize</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  res <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;resize triggered&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="自定义事件" tabindex="-1"><a class="header-anchor" href="#自定义事件"><span>自定义事件</span></a></h4><blockquote><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> myEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">&#39;clickTest&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;clickTest&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;smyhvae&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  element<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>myEvent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//注意，参数是写事件对象 myEvent，不是写 事件名 clickTest</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="dom实例对象event" tabindex="-1"><a class="header-anchor" href="#dom实例对象event"><span>DOM实例对象<code>event</code></span></a></h4><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## DOM 实例对象 event</span>
- Event对象代表事件的状态，包含了与当前事件相关的一切信息。比如事件在其中发生的元素、键盘按键的状态、鼠标的位置、鼠标按钮的状态。
    - 获取键盘按下或弹起的按键
    - 获取鼠标的位置坐标
    - 获取出发改事件的元素
    - 获取事件名称
    - 获取事件当前的传播阶段
    - 获取事件生成的日期时间
    - 事件句柄<span class="token punctuation">(</span>Event Handlers<span class="token punctuation">)</span>
    
    
- 经典应用：商品的放大镜，鼠标光点追踪
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> event <span class="token operator">=</span> event <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>   <span class="token comment">//获取事件信息的兼容性写法</span>

<span class="token comment">// 事件信息event 常见的属性</span>
altKey			：返回当事件被触发时<span class="token punctuation">,</span><span class="token string">&quot;alt&quot;</span>键是否被按下
shiftKey		：返回当事件被触发时<span class="token punctuation">,</span><span class="token string">&quot;shift&quot;</span>键是否被按下
ctrlKey			：返回当事件被触发时<span class="token punctuation">,</span><span class="token string">&quot;ctrl&quot;</span>键是否被按下
metaKey			：返回当事件被触发时<span class="token punctuation">,</span><span class="token string">&quot;meta&quot;</span>键是否被按下

button			：返回当事件被触发时<span class="token punctuation">,</span>哪个鼠标按钮被点击
relatedTarget：返回与事件的目标节点相关的结点

clientX			：返回当事件被触发时<span class="token punctuation">,</span>鼠标指针的水平坐标
clinetY			：返回当事件被触发时<span class="token punctuation">,</span>鼠标指针的垂直坐标
screenX			：返回当某事件被触发时<span class="token punctuation">,</span>鼠标指针的水平坐标
screenY			：返回当某事件被触发时<span class="token punctuation">,</span>鼠标指针的垂直坐标
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="【典例】通过-ctrl-enter-键提交信息" tabindex="-1"><a class="header-anchor" href="#【典例】通过-ctrl-enter-键提交信息"><span>【典例】通过 ctrl + enter 键提交信息</span></a></h4><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token comment">&lt;!-- 通过 ctrl + enter 键提交信息 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text_comment<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>60<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div_show<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>CTRL + 回车 提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// ctrl + enter 提交</span>
    <span class="token keyword">let</span> txt <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;text_comment&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> board <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;div_show&#39;</span><span class="token punctuation">)</span>
    txt<span class="token punctuation">.</span><span class="token function-variable function">onkeydown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> ev <span class="token operator">=</span> ev <span class="token operator">||</span> event<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">13</span> <span class="token operator">&amp;&amp;</span> ev<span class="token punctuation">.</span>ctrlKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> oP <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;p&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oP<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> txt<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        txt<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          board<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>oP<span class="token punctuation">,</span> board<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          board<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oP<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="dom事件流" tabindex="-1"><a class="header-anchor" href="#dom事件流"><span>DOM事件流</span></a></h4><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## DOM 事件流</span>
事件传播的三个阶段：事件捕获 -<span class="token operator">&gt;</span> 目标 -<span class="token operator">&gt;</span> 事件冒泡

<span class="token number">1</span>. 捕获阶段
事件从祖先元素往子元素查找（DOM树结构），直到捕获到事件目标 target。在这个过程中，默认情况下，事件相应的监听函数时不会被触发的。
捕获阶段事件依次传递的顺序是：<span class="token string">&#39;window -&gt; document -&gt; html -&gt; body -&gt; 父元素 -&gt; 子元素 -&gt; 目标元素&#39;</span>。


<span class="token number">2</span>. 事件目标
当到达目标元素后，执行目标元素该事件相应的处理函数。如果没有绑定监听函数，那就不执行。


<span class="token number">3</span>. 事件冒泡
事件从事件目标 target 开始，从子元素往祖先元素向上冒泡，直到页面的最顶级标签。
冒泡指的是：<span class="token string">&#39;子元素的事件被触发时，父元素的同样的事件也会被触发&#39;</span>。取消冒泡就是取消这种机制。
冒泡的顺序是：<span class="token string">&#39;div -&gt; body -&gt; html -&gt; document -&gt; window&#39;</span>。

注意：
以下事件不冒泡（即事件不会往父元素那里传递）：<span class="token string">&#39;blur、focus、load、unload、onmouseenter、onmouseleave&#39;</span>。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="阻止事件冒泡-阻止默认事件" tabindex="-1"><a class="header-anchor" href="#阻止事件冒泡-阻止默认事件"><span>阻止事件冒泡 &amp; 阻止默认事件</span></a></h4><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">### 阻止事件冒泡</span>
停止事件冒泡的方法：
	<span class="token number">1</span>. <span class="token variable"><span class="token variable">\`</span>event.stopPropagation<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>
	<span class="token number">2</span>. <span class="token variable"><span class="token variable">\`</span>event.cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span><span class="token variable">\`</span></span>


在事件结尾添加该方法，此方法阻止事件向 document 上蔓延（否则触发事件后，会冒泡到最后一层document上）
注意：当调用这个方法时，默认事件仍然会执行（如点击一个超链接，这个链接仍然会被打开）


<span class="token comment">### 阻止默认事件</span>
阻止默认事件的默认方法：<span class="token variable"><span class="token variable">\`</span>event.preventDefault<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>
调用此方法链接不会被打开，但是会发生事件冒泡，冒泡会传递到上一层的父元素。

<span class="token comment">### 阻止浏览器默认事件</span>
阻止浏览器的默认事件：在函数末尾添加 <span class="token variable"><span class="token variable">\`</span><span class="token builtin class-name">return</span> <span class="token boolean">false</span><span class="token variable">\`</span></span>
在函数结尾处增加语句 <span class="token variable"><span class="token variable">\`</span><span class="token builtin class-name">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token variable">\`</span></span>。这个方法比较暴力，它会同时阻止事件冒泡和阻止默认事件；
写上次行代码，链接不会被打开，事件也不会传递到上一层的父元素，可以理解为 <span class="token variable"><span class="token variable">\`</span><span class="token builtin class-name">return</span> <span class="token boolean">false</span><span class="token variable">\`</span></span> 等于同时调用 <span class="token variable"><span class="token variable">\`</span>event.stopPropagation<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span> 和 <span class="token variable"><span class="token variable">\`</span>event.preventDefault<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/** 阻止事件冒泡 */</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;box3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event <span class="token operator">=</span> event <span class="token operator">||</span> window<span class="token punctuation">.</span>event
	<span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>stopPropagation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="事件委托" tabindex="-1"><a class="header-anchor" href="#事件委托"><span>事件委托</span></a></h4><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 事件委托</span>
<span class="token comment">### 事件委托的原理：</span>
不给每个子节点单独设置事件监听器，而是设置在其父节点上，然后利用冒泡原理设置每个子节点。


<span class="token comment">### 事件委托的应用： </span>
给 ul 注册点击事件，然后利用事件对象的 target（<span class="token variable"><span class="token variable">\`</span>event.target<span class="token variable">\`</span></span>） 来找到当前点击的 li ，然后事件冒泡到 ul 上， ul 有注册事件，就会触发事件监听器。


<span class="token comment">### 事件委托的好处：</span>
只操作了一次 DOM，提高了程序的性能。
当该触发改事件的同一种标签过多，会过于消耗性能和内存。所以把触发事件绑定到该标签的父层，减少了事件绑定的次数，然后利用冒泡机制，在执行事件函数时利用冒泡机制再去匹配判断目标元素。


<span class="token comment">### 为什么要事件委托？</span>
在 JavaScript 中，添加到页面上的事件处理程序数量将直接关系到页面的整体运行性能，因为 <span class="token string">&#39;需要不断地操作 DOM&#39;</span>，那么引起 <span class="token string">&#39;浏览器重绘和回流&#39;</span> 的可能也就更多，页面交互的时间也就变得越长，这就是为什么要 <span class="token string">&#39;减少 DOM 操作的原因&#39;</span>。
每一个事件处理函数都是一个对象，若存在许多的事件处理函数，内存就会被多占用一部分。如果使用事件委托，就会将所有的操作放到 JS 程序中，<span class="token string">&#39;只对它的父级（如果它只有一个父级）这一个对象进行操作，此时与 DOM 的操作就只需要交互一次，这样就能大大减少与 DOM 的交互次数，以此来提高性能&#39;</span>。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>parent-list<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> #bfa<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>我是p元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>link<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>超链接一<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>link<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>超链接二<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>link<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>超链接三<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;parent-list&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      event <span class="token operator">=</span> event <span class="token operator">||</span> window<span class="token punctuation">.</span>event
      <span class="token comment">// e.target 表示：触发事件的对象</span>
      <span class="token comment">// 如果触发事件的对象是我们期望的元素，则执行否则不执行</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">&#39;link&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;我是ul的单击响应函数&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="触发事件" tabindex="-1"><a class="header-anchor" href="#触发事件"><span>触发事件</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 触发事件</span>

<span class="token comment">### 输入触发事件</span>
  <span class="token number">1</span>. 用于文本框和文本区域（input/textarea 标签）
      - ele.focus<span class="token punctuation">(</span><span class="token punctuation">)</span>
      - ele.blur<span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token number">2</span>.  对于表单元素（form 标签）
      - formEle.reset<span class="token punctuation">(</span><span class="token punctuation">)</span>
      - formEle.submit<span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token number">3</span>. 对于任何元素
      - ele.click<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment">### 触发原生事件</span>
const trigger <span class="token operator">=</span> function<span class="token punctuation">(</span>element, eventName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	const ele <span class="token operator">=</span> document.createEvent<span class="token punctuation">(</span><span class="token string">&#39;HTMLEvents&#39;</span><span class="token punctuation">)</span>
	ele.initEvent<span class="token punctuation">(</span>eventName, true, <span class="token boolean">false</span><span class="token punctuation">)</span>
	element.dispatchEvent<span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
trigger<span class="token punctuation">(</span>ele, <span class="token string">&#39;mousedown&#39;</span><span class="token punctuation">)</span>



<span class="token comment">### 触发自定义事件</span>
const e <span class="token operator">=</span> document.createEvent<span class="token punctuation">(</span><span class="token string">&#39;CustomEvent&#39;</span><span class="token punctuation">)</span>
e.initCustomEvent<span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span>, true, true, <span class="token punctuation">{</span> message: <span class="token string">&#39;Hello World&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
ele.dispatchEvent<span class="token punctuation">(</span>e<span class="token punctuation">)</span> // 触发事件
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="滚动" tabindex="-1"><a class="header-anchor" href="#滚动"><span>滚动</span></a></h3><h4 id="offset、scroll、client" tabindex="-1"><a class="header-anchor" href="#offset、scroll、client"><span>offset、scroll、client</span></a></h4><h5 id="垂直计算" tabindex="-1"><a class="header-anchor" href="#垂直计算"><span>垂直计算</span></a></h5><blockquote><ul><li><p>常见高</p><ul><li><p>网页可见区域高：document.body.clientHeight</p></li><li><p>网页正文全文高：document.body.scrollHeight</p></li><li><p>网页可见区域高（包括边线的高）：document.body.offsetHeight</p></li><li><p>网页被卷去的高：document.body.scrollTop</p></li><li><p>屏幕分辨率高：window.sreen.height</p></li><li><blockquote><p>注意：clientHeight 和 offsetHeight 属性和元素的滚动、位置无关；</p><p>它代表元素的高度，对于inline的元素这个属性一直是0，单位px，只读元素</p></blockquote></li></ul></li><li><p><strong>clientHeight/clientWidth = 内容宽高+padding</strong>。包括padding，但不包括border、水平滚动条、margin的高度。</p></li><li><p><strong>offsetHeight/offsetWidth = 内容宽高+padding+border</strong>。包括padding、border、水平滚动条，但不包括margin的高度。</p></li><li><p>**滚动条情况：**当本元素的子元素比本元素高且overflow=scroll时，本元素会scroll。</p></li><li><p><strong>scrollHeight/scrollWidth = 内容宽高</strong></p><ul><li>scrollHeight代表包括当前不可见部分的元素的高度，而可见部分的高度是clientHeight，所以<strong>scrollHeight&gt;=clientHeight</strong>，</li><li>当没有滚动条时scrollHeight==clientHeight恒成立。单位px，只读元素。</li></ul></li></ul><p><img src="`+w+'" alt="image-20200920125228504"><img src="'+q+'" alt="image-20200920125235120"></p></blockquote><h5 id="水平计算" tabindex="-1"><a class="header-anchor" href="#水平计算"><span>水平计算</span></a></h5><blockquote><ul><li><p><strong>scrollTop/scrollLeft:</strong></p><ul><li><p>获取垂直/水平滚动条滚动的距离</p></li><li><p>代表在有滚动条时，滚动条向下滚动的距离也就是元素顶部被遮住部分的高度。</p></li><li><p>在没有滚动条时scrollTop==0恒成立。单位px，可读可设置。</p></li><li><blockquote><p>当 scrollHeight - scrollTop == clientHeight 时，垂直滚动条抵达底部</p><p>当 scrollWidth - scrollLeft == clientWidth 时，水平滚动条抵达底部</p></blockquote></li></ul></li><li><p><strong>offsetTop/offsetLeft:</strong></p><ul><li><p>当前元素相对于其<strong>定位父元素</strong>的垂直/水平偏移量(获取的相对于offsetParent的距离)</p></li><li><p>当前元素顶部距离最近父元素(offsetParent)顶部/左边的距离，和滚动条无关。单位px，只读元素。</p></li><li><blockquote><p>从父元素的padding开始计算，父元素的border不算在内</p><p>注意：当父元素存在定位时，offsetLeft == style.left (抛除去px的值)</p></blockquote></li></ul></li><li><p><strong>offsetParent/parentNode</strong>:离所定义节点最近脱离文档流的父元素(position定义为absolute、relative、fixed)，如果没有脱离文档流的父元素，则offsetParent获取的是body</p></li></ul><p><img src="'+x+`" alt="image-20210916173138280"></p><ul><li><p>offsetTop/offsetLeft：</p><ul><li>调用者：任意元素。(盒子为主)</li><li>作用：距离父系盒子中带有定位的距离。</li></ul></li><li><p>scrollTop/scrollLeft：</p><ul><li>调用者：document.body.scrollTop（window调用）(盒子也可以调用，但必须有滚动条)</li><li>作用：浏览器无法显示的部分（被卷去的部分）。</li></ul></li><li><p>clientY/clientX：</p><ul><li>调用者：event</li><li>作用：鼠标距离浏览器可视区域的距离（左、上）。</li></ul></li></ul></blockquote><h5 id="自制滚动条" tabindex="-1"><a class="header-anchor" href="#自制滚动条"><span>自制滚动条</span></a></h5><blockquote><ol><li><p>先把系统滚动条隐藏</p></li><li><p>根据内容大小设置滚动条高度（设置的滚动条内容高度越高，滚动条越小）</p></li><li><p>当拖动滚动条时候，移动内容（滚动条跟着鼠标走）</p></li></ol><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>自定义滚轮事件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">*</span> <span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">#wrap</span> <span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token comment">/*超出隐藏*/</span>
      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 100px auto 0<span class="token punctuation">;</span>
      <span class="token property">border</span><span class="token punctuation">:</span> 3px solid black<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">#content</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
      <span class="token comment">/*不需要设置高度，可被图片撑开*/</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">#content&gt;div</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 294px<span class="token punctuation">;</span>
      <span class="token comment">/*去除图片间的间隙*/</span>
      <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">#sliderWrap</span> <span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token property">background-color</span><span class="token punctuation">:</span> greenyellow<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">#slider</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
      <span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">left</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>1 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--右侧滚动条部分--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sliderWrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> wrapDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> contentDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> sliderWrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;sliderWrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> slider <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;slider&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//设置比例 </span>
  <span class="token comment">//clientHeight - 不包括border </span>
  <span class="token keyword">var</span> scale <span class="token operator">=</span> wrapDiv<span class="token punctuation">.</span>clientHeight <span class="token operator">/</span> contentDiv<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
  <span class="token comment">//设置滑块的高度 </span>
  <span class="token keyword">var</span> h1 <span class="token operator">=</span> sliderWrap<span class="token punctuation">.</span>clientHeight <span class="token operator">*</span> scale<span class="token punctuation">;</span>
  <span class="token comment">//为了合理设置高度，设置滑块的最小高度 </span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>h1 <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    h1 <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>scale <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//说明当前内容能过完全显示在可视区域内，不需要滚动条 </span>
    sliderWrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//设置滑块的高度 </span>
  slider<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> h1 <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">//设置y轴的增量 </span>
  <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">//为wrap添加滚轮事件 </span>
  wrapDiv<span class="token punctuation">.</span><span class="token function-variable function">onmousewheel</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>h1<span class="token punctuation">)</span>
    <span class="token keyword">var</span> event1 <span class="token operator">=</span> event <span class="token operator">||</span> e
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>wheelDelta <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//滑动条向下滚动 </span>
      y <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>wheelDelta <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//滑动条向上滚动 </span>
      y <span class="token operator">-=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//y变化时说明在滚动，此时使滚动条发生滚动，以及设置content内容部分滚动 </span>
    <span class="token comment">//判断极端情况，滑块不能划出屏幕 </span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//滑块最多滑到顶部 </span>
      y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">&gt;=</span> sliderWrap<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> slider<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//滑块最多滑到最底部 </span>
      y <span class="token operator">=</span> sliderWrap<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> slider<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//更新滑块的位置 </span>
    slider<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> y <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    scale <span class="token operator">=</span> wrapDiv<span class="token punctuation">.</span>clientHeight <span class="token operator">/</span> contentDiv<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
    contentDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span> y <span class="token operator">/</span> scale <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h2 id="bom" tabindex="-1"><a class="header-anchor" href="#bom"><span>BOM</span></a></h2><p><img src="`+j+`" alt="image-20210916201824135"></p><h3 id="window" tabindex="-1"><a class="header-anchor" href="#window"><span>window</span></a></h3><h4 id="输出日志-对话框" tabindex="-1"><a class="header-anchor" href="#输出日志-对话框"><span>输出日志/对话框</span></a></h4><ul><li><p>控制台打印日志：<code>console.log()</code></p></li><li><p>浏览器警示框：<code>window.alert(); </code></p></li><li><p>浏览器输入框：<code>window.prompt(); </code>-&gt;用于显示可提示用户进行输入的对话框</p></li><li><p>浏览器确认框：<code>window.confirm(); </code>-&gt;判断用户是否确定输入数据（函数返回值是布尔型的，点击确定，返回值为true，点击取消返回值为false）</p></li><li><blockquote><p>window下的内置对象可以省略<code>window</code>前缀</p></blockquote></li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">&quot;请输入您的姓名&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//接受用户输入的信息</span>

<span class="token comment">// 1、浏览器控制台打印出信息.输出获取元素对应的标签内容</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2、可以显示一个对象的所有属性和方法</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 3、typeof不能获取对象的具体类型,获取对象类型始终返回object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">// 4、认为构造函数就是对象的类型</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>	

<span class="token comment">//5、会计算里边运行代码所需事件</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">--</span><span class="token operator">&gt;</span>在里边运行的代码<span class="token operator">--</span><span class="token operator">&gt;</span>console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>	
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">//函数返回值是布尔型的，点击确定，返回值为true，点击取消返回值为false</span>
<span class="token comment">// 1、主要用于删除单挑信息确认</span>
<span class="token keyword">function</span> <span class="token function">del</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
 <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">&quot;您真的确定要删除吗？\\n\\n请确认！&quot;</span><span class="token punctuation">;</span> 
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token operator">==</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
 	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
 <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span> 
<span class="token punctuation">}</span>

<span class="token comment">// 2、JS删除确认框</span>
<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;javascript:if(confirm(&#39;确定删除吗?&#39;))location=&#39;jb.php?id=&#39;&quot;</span><span class="token operator">&gt;</span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

<span class="token comment">// 3、主要用于批量的确认提示</span>
<span class="token operator">&lt;</span>input
  name<span class="token operator">=</span><span class="token string">&quot;Submit&quot;</span>
  type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span>
  <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;inputedit&quot;</span>
  value<span class="token operator">=</span><span class="token string">&quot;删除&quot;</span>
  onclick<span class="token operator">=</span>&quot;<span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&#39;确定纪录吗?&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span>formname<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>&quot;
<span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input
  name<span class="token operator">=</span><span class="token string">&quot;按钮&quot;</span> 
  type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> 
  <span class="token constant">ID</span><span class="token operator">=</span><span class="token string">&quot;ok&quot;</span> 
  onclick<span class="token operator">=</span>&quot;<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&#39;确定删除吗?&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>location<span class="token operator">=</span><span class="token string">&#39;Action.asp?Action=Del&amp;TableName=Item&amp;ID=&lt;%=ID%&gt;&#39;</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>&quot; 
  value<span class="token operator">=</span><span class="token string">&quot;删除栏目&quot;</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="窗口" tabindex="-1"><a class="header-anchor" href="#窗口"><span>窗口</span></a></h4><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 窗口</span>
<span class="token comment">### 打开窗口：\`window.open(url,target,param)\`</span>
    - url：要打开的地址。
    - target：新窗口的位置。可以是：<span class="token variable"><span class="token variable">\`</span>_blank<span class="token variable">\`</span></span> 、<span class="token variable"><span class="token variable">\`</span>_self<span class="token variable">\`</span></span>、 <span class="token variable"><span class="token variable">\`</span>_parent<span class="token variable">\`</span></span> 父框架
    - 返回值：新窗口的句柄
    - param：新窗口的一些设置<span class="token punctuation">(</span>多个参数用逗号隔开<span class="token punctuation">)</span>
        - name：新窗口的名称，可以为空
        - features：属性控制字符串，在此控制窗口的各种属性，属性之间以逗号隔开。
        - <span class="token assign-left variable">fullscreen</span><span class="token operator">=</span> <span class="token punctuation">{</span> yes/no/1/0 <span class="token punctuation">}</span> 是否全屏，默认no
        - <span class="token assign-left variable">channelmode</span><span class="token operator">=</span> <span class="token punctuation">{</span> yes/no/1/0 <span class="token punctuation">}</span> 是否显示频道栏，默认no
        - <span class="token assign-left variable">toolbar</span><span class="token operator">=</span> <span class="token punctuation">{</span> yes/no/1/0 <span class="token punctuation">}</span> 是否显示工具条，默认no
        - <span class="token assign-left variable">location</span><span class="token operator">=</span> <span class="token punctuation">{</span> yes/no/1/0 <span class="token punctuation">}</span> 是否显示地址栏，默认no。（有的浏览器不一定支持）
        - directories <span class="token operator">=</span> <span class="token punctuation">{</span> yes/no/1/0 <span class="token punctuation">}</span> 是否显示转向按钮，默认no
        - <span class="token assign-left variable">status</span><span class="token operator">=</span> <span class="token punctuation">{</span> yes/no/1/0 <span class="token punctuation">}</span> 是否显示窗口状态条，默认no
        - <span class="token assign-left variable">menubar</span><span class="token operator">=</span> <span class="token punctuation">{</span> yes/no/1/0 <span class="token punctuation">}</span> 是否显示菜单，默认no
        - <span class="token assign-left variable">scrollbars</span><span class="token operator">=</span> <span class="token punctuation">{</span> yes/no/1/0 <span class="token punctuation">}</span> 是否显示滚动条，默认yes
        - <span class="token assign-left variable">resizable</span><span class="token operator">=</span> <span class="token punctuation">{</span> yes/no/1/0 <span class="token punctuation">}</span> 是否窗口可调整大小，默认no
        - <span class="token assign-left variable">width</span><span class="token operator">=</span>number 窗口宽度（像素单位）
        - <span class="token assign-left variable">height</span><span class="token operator">=</span>number 窗口高度（像素单位）
        - <span class="token assign-left variable">top</span><span class="token operator">=</span>number 窗口离屏幕顶部距离（像素单位）
        - <span class="token assign-left variable">left</span><span class="token operator">=</span>number 窗口离屏幕左边距离（像素单位）
    

<span class="token comment">### 关闭窗口：window.close()</span>


<span class="token comment">### 新窗口</span>
    - 新窗口.moveTo<span class="token punctuation">(</span><span class="token number">5,5</span><span class="token punctuation">)</span>
    - 新窗口.moveBy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    - 新窗口.resizeTo<span class="token punctuation">(</span><span class="token punctuation">)</span>
    - window.resizeBy<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="错误捕获" tabindex="-1"><a class="header-anchor" href="#错误捕获"><span>错误捕获</span></a></h4><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 页面错误捕获</span>

<span class="token comment">### 即时错误</span>
- <span class="token variable"><span class="token variable">\`</span>window.onerror <span class="token operator">=</span> function<span class="token punctuation">(</span>msg, url, row, col, error<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">..</span>. <span class="token punctuation">}</span><span class="token variable">\`</span></span>
		- msg 为异常基本信息
		- <span class="token builtin class-name">source</span> 为发生异常 JavaScript 文件的 url
		- row 为发生错误的行号
- 添加监听错误事件：<span class="token variable"><span class="token variable">\`</span>window.addEventListener<span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span>, callbackFn<span class="token punctuation">)</span><span class="token variable">\`</span></span>
- 注意：window.onerror 只能捕获即时运行错误（即只能捕获到在 window 发生的即时错误）。



<span class="token comment">### 跨域 js 的运行错误</span>
- window.onerror 默认无法捕获 <span class="token string">&#39;跨域&#39;</span> 的 js 运行错误；
- 需要在 window.onerror 的基础之上，做如下操作：
		- 在引入第三方的跨域文件里，加入如下响应头：<span class="token variable"><span class="token variable">\`</span>Access-Control-Allow-Origin:*<span class="token punctuation">;</span><span class="token variable">\`</span></span> 以表示允许跨域。
		- 引入第三方跨域文件时，在 <span class="token variable"><span class="token variable">\`</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token variable">\`</span></span> 标签中增加 <span class="token variable"><span class="token variable">\`</span>crossOrigin<span class="token variable">\`</span></span> 属性。
		- 因为无法获取出错的文件名和错误信息，所以需要把 <span class="token string">&#39;堆栈&#39;</span> 信息作为 msg 打印出来。
		


<span class="token comment">### Object.onerror</span>
- window.onerror 只能捕获即时运行错误，无法捕获资源加载错误。
	原理是：资源加载错误，并不会向上冒泡，Object.onerror 捕获后就会终止<span class="token punctuation">(</span>不会冒泡到window<span class="token punctuation">)</span>，所以 window.onerror 并不能捕获资源加载错误。

<span class="token number">1</span>. 方式1：<span class="token variable"><span class="token variable">\`</span>Object.onerror<span class="token variable">\`</span></span>。
	img标签、script标签等节点都可以添加 onerror 事件来捕获资源加载的错误。

<span class="token number">2</span>.方式2：<span class="token variable"><span class="token variable">\`</span>performance.getEntries<span class="token variable">\`</span></span>。
	可以获取所有已加载资源的加载时长，通过这种方式可以间接拿到没有加载的资源错误。

	举例：
		<span class="token number">1</span>. 浏览器打开一个网站，按 F12 在控制台下输入 <span class="token variable"><span class="token variable">\`</span>performance.getEntries<span class="token punctuation">(</span><span class="token punctuation">)</span>.forEach<span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> console.log<span class="token punctuation">(</span>item.name<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>
				- <span class="token variable"><span class="token variable">\`</span>performance.getEntries<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span> 返回的是数组，打印出来的资源是已经成功加载的资源。
		<span class="token number">2</span>. 再输入 <span class="token variable"><span class="token variable">\`</span>document.getElementsByTagName<span class="token punctuation">(</span><span class="token string">&#39;img&#39;</span><span class="token punctuation">)</span><span class="token variable">\`</span></span> 就会显示所有 <span class="token string">&#39;需要加载&#39;</span> 的 img 集合。
		<span class="token number">3</span>. 于是，<span class="token variable"><span class="token variable">\`</span>document.getElementsByTagName<span class="token punctuation">(</span><span class="token string">&#39;img&#39;</span><span class="token punctuation">)</span><span class="token variable">\`</span></span> 获取的资源数组减去通过 <span class="token variable"><span class="token variable">\`</span>performance.getEntries<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span> 获取的资源数组，剩下的就是没有成功加载的，这种方式可以 <span class="token string">&#39;间接&#39;</span> 捕获到资源加载错误。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="定时器" tabindex="-1"><a class="header-anchor" href="#定时器"><span>定时器</span></a></h3><h4 id="定时器类别" tabindex="-1"><a class="header-anchor" href="#定时器类别"><span>定时器类别</span></a></h4><blockquote><p><strong>1. 定时器setTimeout</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">//设置定时器：</span>
<span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&#39;http://www.baidu.com&#39;</span><span class="token comment">//location：跳转网页</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 5秒以后跳转</span>

<span class="token comment">//清除定时器：</span>
<span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. 间隔定时器setInterval</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// 间隔时间内做</span>
<span class="token keyword">var</span> timerId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//隔1秒做这个实践</span>
<span class="token function">clearInterval</span><span class="token punctuation">(</span>timerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3. 倒计时定时器</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">getInterval</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span>end<span class="token punctuation">)</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span>函数，时间<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="定时器执行的原理-先后顺序" tabindex="-1"><a class="header-anchor" href="#定时器执行的原理-先后顺序"><span>定时器执行的原理，先后顺序</span></a></h4><blockquote><ol><li>setTimeout允许设置一个超时对象，超时后执行这个对象，但是只执行一次，无周期</li><li>setInternval允许设置一个超时对象，超时后执行这个对象，周期等于超时对象指定的时间，周期为无限循环</li></ol><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token string">&quot;alert(&#39;定时器!&#39;)&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;测试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//运行先出现测试，然后再出现定时器</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>原因:：JS是单线程的，会先阻塞等待定时器执行完后再执行下面的语句，</p><p>异步机制：浏览器的多线程—&gt;对于浏览器来说，JS的执行只不过是在浏览器众多现成中的一条，称之为JS引擎线程，而浏览器其他线程则是通过JS引擎在执行过程到某个特定的功能后指定给浏览器的对应线程。</p><p>JS引擎线程先执行回调函数块，然后执行点击事件回调，接着是执行定时器的线程，最后再执行其他的线程。</p><p>JS先读取到 setTimeout 定时器，此时会执行浏览器的线程，然后跳过定时器继续执行，就看到弹出框的内容为测试，然后因为定时器的时间为0，所以一执行定时器线程就会即可将弹出框为定时器字样的任务添加到主线程（JS引擎线程）的队列之后，等待JS引擎的调用，此时看到的结果是先弹出测试，然后再弹出定时器</p><p>注意：在 HTML5 规范中，规定定时器的定时时间不能小于4ms，如果是小于4ms，则默认为4ms</p><p><img src="`+S+`" alt="JS_DOM_线程执行"></p></blockquote><h4 id="settimeout倒计时为什么会出现误差" tabindex="-1"><a class="header-anchor" href="#settimeout倒计时为什么会出现误差"><span>setTimeout倒计时为什么会出现误差？</span></a></h4><blockquote><p>setTimeout() 只是将事件插入了 “任务队列”，必须等当前代码（执行栈）执行完，主线程才会去执行它指定的回调函数。要是当前代码消耗时间很长，也有可能要等很久，所以并没办法保证回调函数一定会在 setTimeout() 指定的时间执行。所以， setTimeout() 的第二个参数表示的是最少时间，并非是确切时间。</p><p>HTML5标准规定了 setTimeout() 的第二个参数的最小值不得小于4毫秒，如果低于这个值，则默认是4毫秒。在此之前。老版本的浏览器都将最短时间设为10毫秒。另外，对于那些DOM的变动（尤其是涉及页面重新渲染的部分），通常是间隔16毫秒执行。这时使用 <code>requestAnimationFrame()</code> 的效果要好于 <code>setTimeout()</code>。</p></blockquote><h4 id="定时器用作耗时代码的优化" tabindex="-1"><a class="header-anchor" href="#定时器用作耗时代码的优化"><span>定时器用作耗时代码的优化</span></a></h4><blockquote><ul><li>假设在某个页面中要渲染50万个节点，此时若是直接渲染会因占用过多的内存，从而导致浏览器出现了卡死的状态；使得用户(体验感不好)误以为是页面卡死而直接关闭浏览器或者杀死进程</li><li>此时可以利用定时器来优化这个问题。首先把50万个节点分成若干组，然后通过setInterval来进行循环。既不阻塞JS引擎线程的运行，又提高渲染的消耗时间，从而达到最终的优化渲染。</li><li>在定时器执行结束时要调用clearInterval / clearTimeout 方法来清除定时器，以免定时器之间互相干扰。</li></ul></blockquote><h3 id="requestanimationframe-动画帧" tabindex="-1"><a class="header-anchor" href="#requestanimationframe-动画帧"><span>requestAnimationFrame 动画帧</span></a></h3><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## requestAnimationFrame</span>
- <span class="token variable"><span class="token variable">\`</span>window.requestAnimationFrame<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span> 告诉浏览器你希望执行一个动画，并且要求浏览器在下次重绘之前调用指定的回调函数更新动画。该方法需要传入一个回调函数作为参数，该回调函数会在浏览器下一次重绘之前执行。
- <span class="token variable"><span class="token variable">\`</span>window.requestAnimationFrame<span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token variable">\`</span></span> 的执行时机是在 <span class="token string">&#39;浏览器下一次重绘前&#39;</span> 调用 RAF 的回调函数获取最新的动画计算结果。

<span class="token number">1</span>. 说明
- requestAnimationFrame 简称 RAF,它是浏览器全局对象window的一个方法。
- RAF 主要是按照显示器的刷新频率（60Hz 或者 75Hz）对页面进行重绘，大概按照这个刷新频率同步重绘页面，就是大概 1s 最多重绘 <span class="token number">60</span> 次或者 <span class="token number">75</span> 次的频次，<span class="token string">&#39;按照 60 Hz 计算每次重绘大概 16.67ms 重绘一次&#39;</span>，如果 setInterval 设置的频率低于 <span class="token number">16</span>.67ms，会造成 <span class="token string">&#39;过渡绘制&#39;</span> 的问题，如果高于 <span class="token number">16</span>.67ms，有可能会出现 <span class="token string">&#39;掉帧&#39;</span> 的情况。
- request 会把每一帧中的所有 DOM 操作几种起来，在一次重绘或回流中就完成（这点与虚拟DOM类似），并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率，这样就不会出现过度渲染的问题，保证了流畅的需求以及浏览器的完美渲染。


<span class="token number">2</span>. 与 setTimeout 的对比
相比于 setTimeout 的在固定时间后执行对应的动画函数，RAF 用于指示浏览器在下一次重新绘制屏幕图像时, 执行其提供的回调函数。
这也是rAF的最大优势：它能够保证我们的动画函数的每一次调用都对应着一次屏幕重绘，从而避免setTimeout通过时间定义动画频率，与屏幕刷新频率不一致导致的丢帧。


<span class="token number">3</span>. 用法
- <span class="token variable"><span class="token variable">\`</span>window.requestAnimationFrame<span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token variable">\`</span></span>
  - 「参数：callback」下一次重绘之前更新动画帧所调用的函数<span class="token punctuation">(</span>即上面所说的回调函数<span class="token punctuation">)</span>。该回调函数会被传入DOMHighResTimeStamp参数，该参数与performance.now<span class="token punctuation">(</span><span class="token punctuation">)</span>的返回值相同，它表示requestAnimationFrame<span class="token punctuation">(</span><span class="token punctuation">)</span>开始去执行回调函数的时刻。
  - 「返回值」一个 long 整数，请求 ID ，是回调列表中唯一的标识。是个非零值，没别的意义。你可以传这个值给 window.cancelAnimationFrame<span class="token punctuation">(</span><span class="token punctuation">)</span> 以取消回调函数。

	- DOMHighResTimeStamp 指的是一个double类型，用于存储毫秒级的时间值。这种类型可以用来描述离散的时间点或者一段时间（两个离散时间点之间的时间差）。
	- performance.now<span class="token punctuation">(</span><span class="token punctuation">)</span>方法返回一个精确到毫秒的DOMHighResTimeStamp 。
	
	
<span class="token number">4</span>. requestAnimationFrame的好处
相比于setTimeout的在固定时间后执行对应的动画函数，requestAnimationFrame用于指示浏览器在下一次重新绘制屏幕图像时, 执行其提供的回调函数。
- 「使浏览器画面的重绘和回流与显示器的刷新频率同步」它能够保证我们的动画函数的每一次调用都对应着一次屏幕重绘，从而避免setTimeout通过时间定义动画频率，与屏幕刷新频率不一致导致的丢帧。
- 「节省系统资源，提高性能和视觉效果」在页面被置于后台或隐藏时，会自动的停止，不进行函数的执行，当页面激活时，会重新从上次停止的状态开始执行，因此在性能开销上也会相比setTimeout小很多。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span>#000<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span> <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">let</span> divEle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> distance <span class="token operator">=</span> <span class="token number">1500</span><span class="token punctuation">;</span> <span class="token comment">// 需要移动的距离</span>
  <span class="token keyword">const</span> timeCount <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span> <span class="token comment">// 需要使用的时间</span>

  <span class="token keyword">function</span> <span class="token function">handler</span><span class="token punctuation">(</span> <span class="token parameter">time</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// time为rAF返回的毫秒级时间单位，当time的大于timeCount的值则停止</span>
    <span class="token comment">// time理论上是从 1 开始到timeCount定义的3000，</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>time <span class="token operator">&gt;</span> timeCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      time <span class="token operator">=</span> timeCount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 这句代码的作用是 time理论上是从 1 至 3000</span>
    <span class="token comment">// 当到达3000的时候，time * distance / timeCount得到的一定是distance的值1500</span>
    divEle<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> time <span class="token operator">*</span> distance <span class="token operator">/</span> timeCount<span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span> handler <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 循环调用，渲染完成会停止</span>
  <span class="token punctuation">}</span>

  window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span> handler <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="兼容写法" tabindex="-1"><a class="header-anchor" href="#兼容写法"><span>兼容写法</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> lastTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> vendors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;webkit&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;moz&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 浏览器前缀</span>
  <span class="token comment">// 当window.requestAnimationFrame不存在时执行for循环，添加前缀</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> vendors<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>window<span class="token punctuation">.</span>requestAnimationFrame<span class="token punctuation">;</span> <span class="token operator">++</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>requestAnimationFrame <span class="token operator">=</span> window<span class="token punctuation">[</span>vendors<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&#39;RequestAnimationFrame&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span>cancelAnimationFrame <span class="token operator">=</span> window<span class="token punctuation">[</span>vendors<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&#39;CancelAnimationFrame&#39;</span><span class="token punctuation">]</span> <span class="token operator">||</span>
      window<span class="token punctuation">[</span>vendors<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&#39;CancelRequestAnimationFrame&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//当添加前缀后依旧不存在，则使用setTimeout替代</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>requestAnimationFrame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">requestAnimationFrame</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> currTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> timeToCall <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">16.7</span> <span class="token operator">-</span> <span class="token punctuation">(</span>currTime <span class="token operator">-</span> lastTime<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> id <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>currTime <span class="token operator">+</span> timeToCall<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> timeToCall<span class="token punctuation">)</span><span class="token punctuation">;</span>
      lastTime <span class="token operator">=</span> currTime <span class="token operator">+</span> timeToCall<span class="token punctuation">;</span>
      <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>cancelAnimationFrame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">cancelAnimationFrame</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="为什么不使用-settimeout" tabindex="-1"><a class="header-anchor" href="#为什么不使用-settimeout"><span>为什么不使用 setTimeout？</span></a></h4><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 为什么不使用 setTimeout ?</span>
setTimeout 通过设定一个时间间隔来不断的更新屏幕图像，从而完成动图。
它的优点是可控性高，可以进行编码式的动图效果实现。


<span class="token comment">### setTimeout 的缺点</span>
<span class="token number">1</span>. 造成无用的函数运行开销
即是过度绘制，同时因为更新图像的频率和屏幕的刷新重绘制不掉不一致，会产生丢帧，在低性能的显示器动画看起来就会卡顿。

<span class="token number">2</span>. 当页面标签或浏览器置于后台不可见时，仍然会执行，造成资源浪费

<span class="token number">3</span>. API 本身达不到毫秒级的精确
如果使用 setTimeout 或 setInterval 那么需要我们制定时间。假设给予 （1000/60）理论上就可以完成 <span class="token number">60</span> 帧速率的动画。所以事实是浏览器可以 <span class="token string">&#39;强制规定时间间隔的下限(clamping th timeout interval)&#39;</span>，一般浏览器所允许的时间在 <span class="token number">5</span>~10ms，也就是说即使给了某个小于10的数，可能也要等待 10ms。

<span class="token number">4</span>. 浏览器不能完美执行
当动画使用 10ms 的 setTimeout 绘制动画时，将会看到一个时序不匹配。
我们的显示屏一般是「16.7ms（即60FPS）的显示频率」，下图的第一行代表大多数监视器上显示的「16.7ms显示频率」，下图的第二行代表「10ms的典型setTimeout」。由于在显示刷新间隔之前发生了另一个绘制请求，因此无法绘制每次的第三个绘制（红色箭头指示）。这种透支会导致动画断断续续，「因为每三帧都会丢失」。计时器分辨率的降低也会对电池寿命产生负面影响，并降低其他应用程序的性能。
如果使用requestAnimationFrame可以解决setTimeout的丢帧问题，因为它使应用程序时通知（且仅当）的浏览器需要更新页面显示，渲染时间由系统处理。因此，应用程序与浏览器绘画间隔完全一致，并且仅使用适当数量的资源。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+M+`" alt="c186eeb339b240dd96053c2ccaf2a49e_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0"></p></blockquote><h3 id="全局方法" tabindex="-1"><a class="header-anchor" href="#全局方法"><span>全局方法</span></a></h3><h4 id="eval-和-function-构造函数" tabindex="-1"><a class="header-anchor" href="#eval-和-function-构造函数"><span>eval() 和 Function() 构造函数</span></a></h4><blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## eval() 和 Function() 构造函数</span>
eval<span class="token punctuation">(</span><span class="token punctuation">)</span> 和 Function<span class="token punctuation">(</span><span class="token punctuation">)</span> 构造函数都可以动态地执行 JS 代码。
eval<span class="token punctuation">(</span><span class="token punctuation">)</span> 函数可以将字符串作为 JS 代码执行，可以用于计算动态生成的算数表达式、解析 JSON 数据、动态生成函数等。
Function<span class="token punctuation">(</span><span class="token punctuation">)</span> 构造函数可以动态地创建函数，可以用于动态生成函数，或者在运行时根据不同的条件生成不同的函数。
注意：eval<span class="token punctuation">(</span><span class="token punctuation">)</span> 和 Function 构造函数可能存在安全风险，因此开发中应该避免使用它们，以确保代码的安全性和可维护性。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/** eval() 函数 */</span>
<span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&#39;x + y&#39;</span><span class="token punctuation">)</span> <span class="token comment">// result = 3</span>


<span class="token doc-comment comment">/** Function 构造函数 */</span>
<span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&#39;x&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;y&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;return x + y&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// result = 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="location-对象" tabindex="-1"><a class="header-anchor" href="#location-对象"><span>location 对象</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## location 对象</span>
- <span class="token variable"><span class="token variable">\`</span>location.href <span class="token operator">=</span> <span class="token string">&#39;https://xxx&#39;</span><span class="token variable">\`</span></span>：获取当前页面的 url 路径（或者设置 url 路径）
- <span class="token variable"><span class="token variable">\`</span>location.reload<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>：用于重新加载当前页面，主要作用是刷新当前页面数据
- <span class="token variable"><span class="token variable">\`</span>location.assign<span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token variable">\`</span></span>：用来跳转到其他的页面
- <span class="token variable"><span class="token variable">\`</span>location.replace<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>：使用一个新的页面替换当前页面，调用完毕也会跳转页面。但不会生成历史记录，不能使用\`<span class="token variable"><span class="token variable">\`</span>history.back<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>返回本来的页面

- <span class="token builtin class-name">hash</span> 返回url中<span class="token comment">#后面的内容，包含#</span>
- <span class="token function">host</span> 主机名，包括端口
- <span class="token function">hostname</span> 主机名
- pathname url中的路径部分
- protocol 协议 一般是http、https
- search 查询字符串
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="history对象" tabindex="-1"><a class="header-anchor" href="#history对象"><span><strong>history对象</strong></span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## history 对象</span>
- 作用：抑制页面后退back<span class="token punctuation">(</span><span class="token punctuation">)</span>/抑制页面前进forward<span class="token punctuation">(</span><span class="token punctuation">)</span>   //使后退   /前进按钮失效
- <span class="token variable"><span class="token variable">\`</span>history.length<span class="token variable">\`</span></span>：默认为1，获取浏览器历史列表中的 url 数量
- <span class="token variable"><span class="token variable">\`</span>history.back<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>：用来回退到上一个页面，<span class="token variable"><span class="token variable">\`</span>window.history.back<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>
- <span class="token variable"><span class="token variable">\`</span>history.forward<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>：用来跳转下一个页面
- <span class="token variable"><span class="token variable">\`</span>history.go<span class="token punctuation">(</span> int n<span class="token punctuation">)</span><span class="token variable">\`</span></span>：加载 <span class="token function">history</span> 列表中的某个具体页面<span class="token punctuation">(</span>负数为后退，正数为前进，数字为前进/后退数<span class="token punctuation">)</span>



- back<span class="token punctuation">(</span><span class="token punctuation">)</span>      加载 <span class="token function">history</span> 列表中的前一个 URL    
- forward<span class="token punctuation">(</span><span class="token punctuation">)</span>     加载 <span class="token function">history</span> 列表中的下一个 URL window.history.forward<span class="token punctuation">(</span><span class="token punctuation">)</span>
- go<span class="token punctuation">(</span><span class="token punctuation">)</span>        加载 <span class="token function">history</span> 列表中的某个具体页面 window.history.go<span class="token punctuation">(</span>-1<span class="token punctuation">)</span> 


<span class="token comment">### 添加/修改记录</span>
<span class="token number">1</span>. History.pushState<span class="token punctuation">(</span><span class="token punctuation">)</span>方法用于在历史中添加一条记录。
<span class="token variable"><span class="token variable">\`</span>window.history.pushState<span class="token punctuation">(</span><span class="token punctuation">{</span>page:1<span class="token punctuation">}</span>, <span class="token string">&#39;title&#39;</span>, <span class="token string">&#39;?page=1&#39;</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>

<span class="token number">2</span>. History.replaceState<span class="token punctuation">(</span><span class="token punctuation">)</span>方法用来修改 History 对象的当前记录
<span class="token variable"><span class="token variable">\`</span>history.replaceState<span class="token punctuation">(</span><span class="token punctuation">{</span>page:1<span class="token punctuation">}</span>, <span class="token string">&#39;title&#39;</span>, <span class="token string">&#39;?page=2&#39;</span><span class="token punctuation">)</span><span class="token variable">\`</span></span>

    state：一个与指定历史记录相关联的状态对象，当popstate事件触发时，会把该对象传入回调函数。如果不需要用到，可以传null。
    title：页面的标题。但当前大多数浏览器都不支持或忽略这个值。可以传null。
    url：添加或修改的history的网址。为了安全性，必须保持与当前URL同一个域。 

pushState添加一个最新的历史记录，而replaceState则是把当前的页面的历史记录替换掉。
他们最大的特点是添加或替换历史记录后，浏览器地址栏会变成你传的地址，而页面并不会重新载入或跳转。

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="popstate-事件" tabindex="-1"><a class="header-anchor" href="#popstate-事件"><span>popState 事件</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">### popState 事件</span>
当活动历史记录条目更改时会触发 popState 事件。如果被激活的历史记录条目是通过 <span class="token variable"><span class="token variable">\`</span>history.pushState<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span> 的调用创建时，或受到对 <span class="token variable"><span class="token variable">\`</span>history.replaceState<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">\`</span></span> 调用的影响，popState 事件的 state 属性包含历史条目的状态对象的副本。

注意：调用 history.pushState<span class="token punctuation">(</span><span class="token punctuation">)</span> 或 history.replaceState<span class="token punctuation">(</span><span class="token punctuation">)</span> 方法都不会触发 popState 事件。只有在做出浏览器动作时才会触发改事件（如用户点击浏览器的回退按钮、或在 JS 中调用 history.back<span class="token punctuation">(</span><span class="token punctuation">)</span> 或 history.forward<span class="token punctuation">(</span><span class="token punctuation">)</span> 方法）

不同的浏览器在加载页面时处理 popState 事件的形式存在差异。页面加载时 Chrome 和 Safari 通常会触发（emit）popState 事件，但 FireFox 则不会触发。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+T+`" alt="image-20200921181305551"></p><h3 id="navigator对象" tabindex="-1"><a class="header-anchor" href="#navigator对象"><span><strong>Navigator对象</strong></span></a></h3><p>--&gt;包含有关浏览器的信息</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>navigator<span class="token punctuation">.</span>userAgent			<span class="token comment">//浏览器F12中network的（request-Headers）最底下。</span>
navigator<span class="token punctuation">.</span>appCodeName 		<span class="token comment">//返回浏览器的代码名</span>
navigator<span class="token punctuation">.</span>appName 			<span class="token comment">//返回浏览器的名称</span>
navigator<span class="token punctuation">.</span>appVersion 		<span class="token comment">//返回浏览器的平台和版本信息  </span>
navigator<span class="token punctuation">.</span>cookieEnabled 	<span class="token comment">//返回指明浏览器中是否启用 cookie 的布尔值  </span>
navigator<span class="token punctuation">.</span>platform 			<span class="token comment">//返回运行浏览器的操作系统平台  </span>
navigator<span class="token punctuation">.</span>userAgent 		<span class="token comment">//返回由客户机发送服务器的user-agent 头部的值 </span>
navigator<span class="token punctuation">.</span><span class="token function">javaEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 	<span class="token comment">//指定是否在浏览器中启用Java  </span>
navigator<span class="token punctuation">.</span><span class="token function">taintEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 	<span class="token comment">//规定浏览器是否启用数据污点(data tainting) </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="方法-类型" tabindex="-1"><a class="header-anchor" href="#方法-类型"><span>方法/类型</span></a></h2><ul><li><p>toSource()返回该对象的源代码。</p></li><li><p>toString()把逻辑值转换为字符串，并返回结果。</p></li><li><p>valueOf() 返回 Boolean 对象的原始值。</p></li><li><p>tagName返回元素的标签名 // document.children[0].tagName;//会返回HTML</p></li><li><p><strong>NaN属性：--&gt;用于引用特殊的非数字值</strong>(Not a Number，表示不是一个数字)</p><ul><li>isNaN() 来判断一个值是否是数字。原因是 NaN 与所有值都不相等，包括它自己</li><li>isNaN(x)--&gt;true:代表不是数字；false:代表是数字</li></ul></li><li><p><strong>转义字符</strong></p><ul><li>（在输出字符串时候要是想带上引号，需要运用到转义字符）</li><li>&quot; --&gt;转双引号 &#39; --&gt;转单引号 \\r --&gt;回车符 \\n --&gt;换行符</li></ul></li></ul><h3 id="void关键字" tabindex="-1"><a class="header-anchor" href="#void关键字"><span>void关键字</span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">===</span> <span class="token keyword">undefined</span>     <span class="token comment">// 一般用void 0替代undefined，除了防止被重写，还可减少字节</span>

<span class="token literal-property property">javascript</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// void会执行()里面的语句或表达式，返回值为undefined</span>

<span class="token literal-property property">javascript</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment">// 为执行js函数，0表示不执行函数，返回数值为undefined</span>

<span class="token literal-property property">javascript</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//此为执行fun函数，括号内可传参</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="new" tabindex="-1"><a class="header-anchor" href="#new"><span>new</span></a></h3><table><thead><tr><th style="text-align:center;">调用new的过程</th><th style="text-align:center;">自己实现new</th><th style="text-align:center;">new操作符具体干了什么</th></tr></thead><tbody><tr><td style="text-align:center;">新生成一个对象</td><td style="text-align:center;">创建一个空对象</td><td style="text-align:center;">创建一个空对象，并且this变量引用该对象</td></tr><tr><td style="text-align:center;">链接到原型</td><td style="text-align:center;">获取构造函数</td><td style="text-align:center;">继承了该函数的原型</td></tr><tr><td style="text-align:center;">绑定this</td><td style="text-align:center;">设置空对象的原型</td><td style="text-align:center;">属性和方法被加入到this的引用对象中</td></tr><tr><td style="text-align:center;">返回新对象</td><td style="text-align:center;">绑定this并执行构造函数</td><td style="text-align:center;">新创建的对象由this所引用，最后隐式返回this</td></tr></tbody></table><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//创建一个空对象</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//获取构造函数</span>
  <span class="token keyword">let</span> Constructor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//链接到原型</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Constructor</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
  <span class="token comment">//绑定this值</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">Constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//使用apply，将构造函数中的this指向新对象，这样新对象就可以访问构造函数中的属性和方法</span>
  <span class="token comment">//返回新对象</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">?</span> result <span class="token operator">:</span> obj<span class="token punctuation">;</span><span class="token comment">//如果返回值是一个对象就返回该对象，否则返回构造函数的一个实例对象</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="运算规则" tabindex="-1"><a class="header-anchor" href="#运算规则"><span>运算规则</span></a></h3><ul><li>运算的优先级：<code>括号 &gt; 字符串 &gt; 数字 &gt; 布尔</code></li><li>如<code>&#39;[3]&#39; + (1 + 1 + true + null + &#39;ccc&#39; + 1 + 1 + true + null) = &quot;[3]3ccc11truenull&quot;</code></li><li>通过typeof运算符来确定JS变量的数据类型</li></ul><h3 id="字符串string" tabindex="-1"><a class="header-anchor" href="#字符串string"><span>字符串String</span></a></h3><ul><li>数字0、NaN、空字符串&quot;&quot;、false、undefined、null都会被识别为false。</li><li>undefined：未定义或未初始化的变量，都为undefined。</li><li>undefined和null的区别：如果变量为null，说明变量存在，只不过值是空值null。</li></ul><p><img src="`+A+'" alt="image-20210331160948708"></p><h3 id="数据类型转换" tabindex="-1"><a class="header-anchor" href="#数据类型转换"><span>数据类型转换</span></a></h3><ul><li>**转换为字符串类型：**x.toString()或String(x) <ul><li>String(100 + 23) // 从表达式中的数值返回字符串</li><li>(100 + 23).toString()</li></ul></li><li>**转换为数字类型：**Number(x)、paseIntI(x)、paseFloat(x) <ul><li>Number(x)：通过该方法转化的数字类型保留原来值的内容</li><li>paseIntI(x)：通过该方法只能保留整数部分（返回的是一个整数）</li><li>paseFloat(x)：可以保留原来值内容，如果是非数字的字符串，直接保留数字部分</li></ul></li><li>**转换为布尔类型：**Boolean(x)</li></ul><h3 id="隐式转换" tabindex="-1"><a class="header-anchor" href="#隐式转换"><span>隐式转换</span></a></h3><p><img src="'+E+'" alt="image-20210915145032445"></p><p><img src="'+D+'" alt="img"></p><p><img src="'+L+'" alt="jsé¢è¯é¢å¤§åââéå¼ç±»åè½¬æ¢"></p><p><img src="'+O+`" alt="img"></p><h3 id="包装对象" tabindex="-1"><a class="header-anchor" href="#包装对象"><span>包装对象</span></a></h3><ul><li>包装对象指的是与数值、字符串、布尔值分别相对应的<code>Number</code>、<code>String</code>、<code>Boolean</code>三个原生对象。这三个原生对象可以把原始类型的值变成（包装成）对象，包装对象的目的是使得原始类型的值也有办法调用自己的方法</li><li>注意：三个对象作为构造函数使用（带有<code>new</code>）时，可以将原始类型的值转为对象；作为普通函数使用时（不带有<code>new</code>），可以将任意类型的值，转为原始类型的值</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// 用 new 关键字</span>
<span class="token keyword">var</span> v1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> v2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&#39;abc&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> v3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> v1<span class="token punctuation">,</span> v1 <span class="token operator">===</span> <span class="token number">123</span><span class="token punctuation">)</span>  <span class="token comment">//object false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> v2<span class="token punctuation">,</span> v2 <span class="token operator">===</span> <span class="token string">&#39;abc&#39;</span><span class="token punctuation">)</span>  <span class="token comment">//object false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> v3<span class="token punctuation">,</span> v3 <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span>  <span class="token comment">//object false</span>
<span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 123</span>
<span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&#39;abc&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;abc&quot;</span>
<span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;123&quot;</span>
<span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&#39;abc&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;abc&quot;</span>
<span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;true&quot;</span>

<span class="token comment">// 不用 new 关键字</span>
<span class="token keyword">var</span> v4 <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&#39;123&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> v4<span class="token punctuation">,</span> v4 <span class="token operator">===</span> <span class="token number">123</span><span class="token punctuation">)</span>  <span class="token comment">// number true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="运动" tabindex="-1"><a class="header-anchor" href="#运动"><span>运动</span></a></h2><h3 id="方向判断" tabindex="-1"><a class="header-anchor" href="#方向判断"><span>方向判断</span></a></h3><p><img src="`+C+`" alt="image-20211013215645301"></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> a<span class="token punctuation">.</span>x <span class="token operator">-</span> b<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> a<span class="token punctuation">.</span>y <span class="token operator">-</span> b<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
<span class="token keyword">let</span> dirName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">&#39;上方&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;右侧&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;下方&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;左侧&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 上(0) 右(1) 下(2) 左(3)</span>
<span class="token keyword">let</span> direction <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">180</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">90</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dirName<span class="token punctuation">[</span>direction<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="碰撞检测" tabindex="-1"><a class="header-anchor" href="#碰撞检测"><span>碰撞检测</span></a></h3><h3 id="缓冲运动" tabindex="-1"><a class="header-anchor" href="#缓冲运动"><span>缓冲运动</span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
	* target - 运动到达的位置
	* div - 节点标签(需要设定为块元素)
*/</span>
<span class="token comment">// 横向缓冲运动框架</span>
<span class="token keyword">function</span> <span class="token function">startMove</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> div</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>move<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    speed <span class="token operator">=</span> <span class="token punctuation">(</span>target <span class="token operator">-</span> div<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>div<span class="token punctuation">.</span>offsetLeft <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> div<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>div<span class="token punctuation">.</span>offsetLeft <span class="token operator">&gt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> div<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>div<span class="token punctuation">.</span>offsetLeft <span class="token operator">===</span> target<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 横向匀速运动框架</span>
<span class="token keyword">function</span> <span class="token function">startMove2</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> div</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>moving<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">moving</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    div<span class="token punctuation">.</span>offsetLeft <span class="token operator">&lt;=</span> target <span class="token operator">?</span> speed <span class="token operator">=</span> <span class="token number">9</span> <span class="token operator">:</span> speed <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>target <span class="token operator">-</span> div<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> target <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span><span class="token punctuation">;</span> <span class="token comment">// 直接到达</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 停止</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> div<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> speed <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="完美运动" tabindex="-1"><a class="header-anchor" href="#完美运动"><span>完美运动</span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// 封装获取计算后元素样式函数，返回小数</span>
<span class="token keyword">function</span> <span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">.</span>currentStyle <span class="token operator">?</span> obj<span class="token punctuation">.</span>currentStyle<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 任意值运动框架</span>
<span class="token keyword">function</span> <span class="token function">startMove</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> json<span class="token punctuation">,</span> fnEnd</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>move<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> current <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> stop <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> attr <span class="token keyword">in</span> json<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      current <span class="token operator">=</span> attr <span class="token operator">===</span> <span class="token string">&#39;opacity&#39;</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token function">getStyle</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> attr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token function">getStyle</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> attr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> speed <span class="token operator">=</span> <span class="token punctuation">(</span>json<span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">-</span> current<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">;</span>
      speed <span class="token operator">=</span> speed <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>json<span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">===</span> current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stop <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        stop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>attr <span class="token operator">===</span> <span class="token string">&#39;opacity&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          obj<span class="token punctuation">.</span>style<span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>current <span class="token operator">+</span> speed<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
          obj<span class="token punctuation">.</span>style<span class="token punctuation">.</span>filter <span class="token operator">=</span> <span class="token string">&quot;alpha(&quot;</span> <span class="token operator">+</span> <span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>current <span class="token operator">+</span> speed<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          obj<span class="token punctuation">.</span>style<span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">=</span> current <span class="token operator">+</span> speed <span class="token operator">+</span> <span class="token string">&#39;px&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;json[attr]:&#39;</span><span class="token punctuation">,</span> json<span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39;attr:&#39;</span><span class="token punctuation">,</span> attr<span class="token punctuation">,</span> <span class="token string">&#39;current:&#39;</span><span class="token punctuation">,</span> current<span class="token punctuation">,</span> <span class="token string">&#39;getStyle:&#39;</span><span class="token punctuation">,</span> <span class="token function">getStyle</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> attr<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;speed:&#39;</span><span class="token punctuation">,</span> speed<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stop <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>fnEnd<span class="token punctuation">)</span> <span class="token function">fnEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 运动调用 */</span> 
<span class="token comment">// 注意：需要让触发事件的标签设置为块元素</span>
<span class="token function">startMove</span><span class="token punctuation">(</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;div1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span> <span class="token string-property property">&#39;height&#39;</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;width&quot;</span><span class="token operator">:</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;opacity&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;left&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;top&quot;</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;链式函数执行完成！&#39;</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">startMove</span><span class="token punctuation">(</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;div4&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span> <span class="token string-property property">&quot;top&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">startMove</span><span class="token punctuation">(</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;div3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;width&quot;</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">startMove</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;left_icon&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&#39;opacity&#39;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="弹性运动" tabindex="-1"><a class="header-anchor" href="#弹性运动"><span>弹性运动</span></a></h3><ul><li>弹性： <ul><li>速度+=（目标点-当前值）/系数；//系数大概可以选择6，7，8</li><li>速度*=摩擦系数；//系数可以选择0.7，0.75，0.8</li></ul></li><li>缓冲： <ul><li>速度=（目标点-当前值）/系数；</li><li>速度取整；</li></ul></li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>cnblogs<span class="token punctuation">.</span>com<span class="token operator">/</span>xiaohuochai<span class="token operator">/</span>p<span class="token operator">/</span><span class="token number">5980424</span><span class="token punctuation">.</span>html#anchor2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="重力加速度" tabindex="-1"><a class="header-anchor" href="#重力加速度"><span>重力加速度</span></a></h3><h2 id="jq" tabindex="-1"><a class="header-anchor" href="#jq"><span>JQ</span></a></h2><h3 id="理念" tabindex="-1"><a class="header-anchor" href="#理念"><span>理念</span></a></h3><h4 id="load-和-ready-谁先执行" tabindex="-1"><a class="header-anchor" href="#load-和-ready-谁先执行"><span>load 和 ready 谁先执行？</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token function">fcuntion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>DOM文档加载步骤：</strong></p><ol><li>解析 HTML 结构</li><li>加载外部脚本和样式表文件</li><li>解析并执行脚本代码</li><li>构造 HTML DOM 模型（ready 方法执行）</li><li>加载图片、视频等外部文件</li><li>页面加载完毕（load 方法执行）</li></ol><p>注意：onload 只执行一次，若有多次，则最后一次覆盖前面的 ready 可以执行多次，不会覆盖</p><h3 id="选择器" tabindex="-1"><a class="header-anchor" href="#选择器"><span>选择器</span></a></h3><h4 id="基本选择器" tabindex="-1"><a class="header-anchor" href="#基本选择器"><span>基本选择器</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#div1&quot;</span><span class="token punctuation">)</span>		<span class="token comment">//按id属性选择元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.class1&quot;</span><span class="token punctuation">)</span> 	<span class="token comment">//按class属性选择元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span>		<span class="token comment">//按元素名称选择元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span>			<span class="token comment">//选择所有元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#div2,span&quot;</span><span class="token punctuation">)</span>	<span class="token comment">//并列选择元素</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="层次选择器" tabindex="-1"><a class="header-anchor" href="#层次选择器"><span>层次选择器</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;body div&quot;</span><span class="token punctuation">)</span> <span class="token comment">//选择body所有的div后代元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;body&gt;div&quot;</span><span class="token punctuation">)</span> <span class="token comment">//选择body所有的直接div后代元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#div1+div&quot;</span><span class="token punctuation">)</span> <span class="token comment">//选择id值为div1的元素的后面相邻的兄弟元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#div1~div&quot;</span><span class="token punctuation">)</span> <span class="token comment">//选择id值为div1的元素的后面所有的兄弟元素</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="基本过滤选择器" tabindex="-1"><a class="header-anchor" href="#基本过滤选择器"><span>基本过滤选择器</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:first&quot;</span><span class="token punctuation">)</span>	<span class="token comment">//选择第一个div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:last&quot;</span><span class="token punctuation">)</span>	<span class="token comment">//选择最后一个div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:eq(4)&quot;</span><span class="token punctuation">)</span>	<span class="token comment">//选择第五个div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:gt(5)&quot;</span><span class="token punctuation">)</span> 	<span class="token comment">//选择所有索引值大于5的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:lt(5)&quot;</span><span class="token punctuation">)</span> 	<span class="token comment">//选择所有索引值小于5的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:even&quot;</span><span class="token punctuation">)</span>	<span class="token comment">//选择所有索引值为偶数的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:odd&quot;</span><span class="token punctuation">)</span>	<span class="token comment">//选择所有索引值为奇数的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:not(.class1)&quot;</span><span class="token punctuation">)</span> <span class="token comment">//选择不包含class属性值为class1的所有div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;:header&quot;</span><span class="token punctuation">)</span>	<span class="token comment">//选择所有的标题元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;:focus&quot;</span><span class="token punctuation">)</span>		<span class="token comment">//选择成为焦点的元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;:animated&quot;</span><span class="token punctuation">)</span>	<span class="token comment">//选择所有动画元素</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="内容过滤选择器" tabindex="-1"><a class="header-anchor" href="#内容过滤选择器"><span>内容过滤选择器</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:contains(class为class1)&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变所有包含文本&quot;class为class1&quot;的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:has(&#39;.subClass1&#39;)&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变所有包含class值为subClass1子元素的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:empty&quot;</span><span class="token punctuation">)</span><span class="token comment">//改变所有不包含子元素的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:parent&quot;</span><span class="token punctuation">)</span><span class="token comment">//改变所有包含子元素的div元素</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="属性过滤选择器" tabindex="-1"><a class="header-anchor" href="#属性过滤选择器"><span>属性过滤选择器</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div[title]&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变所有有title属性的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div[title=title1]&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变所有有title属性为title1的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div[title!=title1]&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变所有有title属性不为title1的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div[title^=ti]&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变所有有title属性值以ti开头的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div[title$=1]&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变所有有title属性以1结尾的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div[title*=Pre]&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变所有有title属性值包含Pre的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div[id],[title]&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变包含属性为id和属性为title的div元素</span>
<span class="token comment">//注意：&quot;[],[]&quot;是并集，&quot;[][]&quot;是交集（两个条件间隔一个空格）</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="可见过滤选择器" tabindex="-1"><a class="header-anchor" href="#可见过滤选择器"><span>可见过滤选择器</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:visible&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变所有可见的的div元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div:hidden&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示所有不可见的的div元素背景色</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="子元素过滤选择器" tabindex="-1"><a class="header-anchor" href="#子元素过滤选择器"><span>子元素过滤选择器</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div.class1 :nth-child(2)&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment">//选择所有class属性值为class1的div元素的第二个子元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div.class1 :first-child&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变所有class属性值为class1的div元素的第1个子元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div.class1 :last-child&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变所有class属性值为class1的div元素的最后1个子元素</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;div.class1 :only-child&quot;</span><span class="token punctuation">)</span> <span class="token comment">//改变所有class属性值为class1的div元素的唯一一个子元素</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="自定义查询选择器简写-jq原理" tabindex="-1"><a class="header-anchor" href="#自定义查询选择器简写-jq原理"><span>自定义查询选择器简写(JQ原理)</span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> $ <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span>
<span class="token keyword">const</span> $$ <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span>

<span class="token keyword">const</span> mainCotent <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;.main-content&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> exteralLinks <span class="token operator">=</span> <span class="token function">$$</span><span class="token punctuation">(</span><span class="token string">&#39;a[target=&quot;_blank&quot;]&#39;</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,188),I=[N];function P(J,B){return s(),a("div",null,I)}const U=n(H,[["render",P],["__file","JavaScript.html.vue"]]),R=JSON.parse('{"path":"/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/JavaScript.html","title":"","lang":"zh-CN","frontmatter":{"Author":"willysliang","CreateTime":"2022-08-21T16:16:54.000Z","Modifier":"willysliang","ModifiedTime":"2023-03-29T15:00:48.000Z","Description":"JavaScript"},"headers":[{"level":2,"title":"JavaScript","slug":"javascript","link":"#javascript","children":[]},{"level":2,"title":"JS理念","slug":"js理念","link":"#js理念","children":[{"level":3,"title":"抽象语法树AST","slug":"抽象语法树ast","link":"#抽象语法树ast","children":[]},{"level":3,"title":"一次js请求的缓存处理","slug":"一次js请求的缓存处理","link":"#一次js请求的缓存处理","children":[]}]},{"level":2,"title":"JS在浏览器的运行机制","slug":"js在浏览器的运行机制","link":"#js在浏览器的运行机制","children":[{"level":3,"title":"进程与线程","slug":"进程与线程","link":"#进程与线程","children":[]},{"level":3,"title":"浏览器","slug":"浏览器","link":"#浏览器","children":[]},{"level":3,"title":"事件循环 Event Loop","slug":"事件循环-event-loop","link":"#事件循环-event-loop","children":[]},{"level":3,"title":"宏任务 & 微任务","slug":"宏任务-微任务","link":"#宏任务-微任务","children":[]},{"level":3,"title":"完整的事件循环 Event Loop","slug":"完整的事件循环-event-loop","link":"#完整的事件循环-event-loop","children":[]},{"level":3,"title":"NodeJS中的运行机制","slug":"nodejs中的运行机制","link":"#nodejs中的运行机制","children":[]},{"level":3,"title":"浏览器渲染原理","slug":"浏览器渲染原理","link":"#浏览器渲染原理","children":[]},{"level":3,"title":"重绘和回流(重排)","slug":"重绘和回流-重排","link":"#重绘和回流-重排","children":[]}]},{"level":2,"title":"脚本标签 script","slug":"脚本标签-script","link":"#脚本标签-script","children":[{"level":3,"title":"DOMContentLoaded 事件","slug":"domcontentloaded-事件","link":"#domcontentloaded-事件","children":[]},{"level":3,"title":"DOMContentLoaded和load的区别","slug":"domcontentloaded和load的区别","link":"#domcontentloaded和load的区别","children":[]}]},{"level":2,"title":"DOM","slug":"dom","link":"#dom","children":[{"level":3,"title":"DOMString","slug":"domstring","link":"#domstring","children":[]},{"level":3,"title":"DOM方法","slug":"dom方法","link":"#dom方法","children":[]},{"level":3,"title":"DOM属性","slug":"dom属性","link":"#dom属性","children":[]},{"level":3,"title":"DOM访问","slug":"dom访问","link":"#dom访问","children":[]},{"level":3,"title":"DOM修改（操作样式）","slug":"dom修改-操作样式","link":"#dom修改-操作样式","children":[]},{"level":3,"title":"DOM事件","slug":"dom事件","link":"#dom事件","children":[]},{"level":3,"title":"滚动","slug":"滚动","link":"#滚动","children":[]}]},{"level":2,"title":"BOM","slug":"bom","link":"#bom","children":[{"level":3,"title":"window","slug":"window","link":"#window","children":[]},{"level":3,"title":"定时器","slug":"定时器","link":"#定时器","children":[]},{"level":3,"title":"requestAnimationFrame 动画帧","slug":"requestanimationframe-动画帧","link":"#requestanimationframe-动画帧","children":[]},{"level":3,"title":"全局方法","slug":"全局方法","link":"#全局方法","children":[]},{"level":3,"title":"location 对象","slug":"location-对象","link":"#location-对象","children":[]},{"level":3,"title":"history对象","slug":"history对象","link":"#history对象","children":[]},{"level":3,"title":"Navigator对象","slug":"navigator对象","link":"#navigator对象","children":[]}]},{"level":2,"title":"方法/类型","slug":"方法-类型","link":"#方法-类型","children":[{"level":3,"title":"void关键字","slug":"void关键字","link":"#void关键字","children":[]},{"level":3,"title":"new","slug":"new","link":"#new","children":[]},{"level":3,"title":"运算规则","slug":"运算规则","link":"#运算规则","children":[]},{"level":3,"title":"字符串String","slug":"字符串string","link":"#字符串string","children":[]},{"level":3,"title":"数据类型转换","slug":"数据类型转换","link":"#数据类型转换","children":[]},{"level":3,"title":"隐式转换","slug":"隐式转换","link":"#隐式转换","children":[]},{"level":3,"title":"包装对象","slug":"包装对象","link":"#包装对象","children":[]}]},{"level":2,"title":"运动","slug":"运动","link":"#运动","children":[{"level":3,"title":"方向判断","slug":"方向判断","link":"#方向判断","children":[]},{"level":3,"title":"碰撞检测","slug":"碰撞检测","link":"#碰撞检测","children":[]},{"level":3,"title":"缓冲运动","slug":"缓冲运动","link":"#缓冲运动","children":[]},{"level":3,"title":"完美运动","slug":"完美运动","link":"#完美运动","children":[]},{"level":3,"title":"弹性运动","slug":"弹性运动","link":"#弹性运动","children":[]},{"level":3,"title":"重力加速度","slug":"重力加速度","link":"#重力加速度","children":[]}]},{"level":2,"title":"JQ","slug":"jq","link":"#jq","children":[{"level":3,"title":"理念","slug":"理念","link":"#理念","children":[]},{"level":3,"title":"选择器","slug":"选择器","link":"#选择器","children":[]},{"level":3,"title":"自定义查询选择器简写(JQ原理)","slug":"自定义查询选择器简写-jq原理","link":"#自定义查询选择器简写-jq原理","children":[]}]}],"git":{"updatedTime":1710941914000,"contributors":[{"name":"willy","email":"willysliang","commits":5},{"name":"willy","email":"willysliang@qq.com","commits":4}]},"filePathRelative":"前端基础/JavaScript.md"}');export{U as comp,R as data};
